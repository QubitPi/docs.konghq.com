<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">

  

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
    <!-- OneTrust Cookies Consent Notice start for konghq.com -->
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="2c4de954-6bec-4e93-8086-64cb113f151a">
    </script>
    <script type="text/javascript">
    function OptanonWrapper() { }
    </script>
    <!-- OneTrust Cookies Consent Notice end for konghq.com -->

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NL48VKT');</script>
    <!-- End Google Tag Manager -->
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>MeshLoadBalancingStrategy - Kong Mesh - v2.8.x | Kong Docs</title>
  <meta name="description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices.">
  <meta name="author" content="KongHQ">
  <meta property="og:title" content="MeshLoadBalancingStrategy - Kong Mesh - v2.8.x | Kong Docs">
  <meta property="og:site_name" content="Kong Docs">
  <!-- use share link for facebook -->
  <meta property="og:url" content="https://docs.konghq.com">
  <meta property="og:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices.">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_US">
  <meta property="og:image" content="https://docs.konghq.com/assets/images/share.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@thekonginc">
  <meta name="twitter:creator" content="@thekonginc">
  <meta name="twitter:url" content="https://docs.konghq.com">
  <meta name="twitter:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices.">
  <meta name="twitter:image" content="https://docs.konghq.com/assets/images/share.png">
  <meta property="fb:admins" content="227304446">
  <meta property="fb:admins" content="576641408">
  <meta name="google-site-verification" content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4">

  

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "KongHQ",
      "url": "https://docs.konghq.com",
      "logo": "https://docs.konghq.com/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/konginc",
        "https://twitter.com/thekonginc",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="https://cloud.typography.com">
  <link rel="dns-prefetch" href="https://dev.visualwebsiteoptimizer.com">
  <link rel="dns-prefetch" href="https://cdn.segment.com">

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">

  
    <link rel="canonical" href="https://docs.konghq.com/mesh/latest/policies/meshloadbalancingstrategy/">
  

  
    <meta name="robots" content="follow,noindex">
  

  <!-- FontAwesome icon font -->
  <script src="https://kit.fontawesome.com/1332a92967.js" crossorigin="anonymous">
  </script>

  
  <script src="/vite/assets/application-DqmI9sc2.js" crossorigin="anonymous" type="module"></script>
<link href="/vite/assets/_commonjsHelpers-Cpj98o6Y.js" rel="modulepreload" as="script" crossorigin="anonymous">


  

  

  <link rel="stylesheet" href="/vite/assets/application-CrIf7Il_.css" media="screen">

  
</head>


  <body id="" data-spy="scroll" data-target="#scroll-sidebar" data-offset="350">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NL48VKT" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header class="navbar-v2 closed">
  <a class="skip-main" href="#main">Skip to content</a>
  <!-- uncomment the promo-banner div when adding a new promo banner-->
  <!--also uncomment the promo banner sections in app/assets/stylesheets/header.less and application.js-->
  <!-- <div id="promo-banner">
    <div class="container">
      <div class="closebanner"></div> <strong>2024 API Summit Hackathon: Experiment with API Innovation & AI. Submit by Sept 11 &nbsp;&mdash;<a href="https://konghq.com/conferences/kong-summit/hackathon?utm_medium=website&utm_source=docs-konghq-com&utm_campaign=docs-banner">Enter Now &rarr;</a> </strong>
    </div>
  </div> -->
  <div class="navbar-content">
    <a href="https://konghq.com" class="navbar-brand col col-xl-auto" target="_blank" rel="noopener noreferrer">
      <img src="/assets/images/logos/konglogo-dark-theme.svg" alt="Kong Logo" id="kong-logo">
    </a>
    <span class="logo-divider">|</span>
    <a href="/" class="navbar-brand col col-xl-auto">
      <img src="/assets/images/logos/docslogo-dark-theme.svg" alt="Kong Docs Logo" id="kong-docs-logo">
    </a>

    <div class="separator mobile"></div>
      <div class="search-input-wrapper" id="getkong-algolia-search-input">
    </div>

    <div class="search-results-wrapper"></div>

    <div class="navbar-items" role="navigation" aria-label="Main menu">
      <ul class="navbar-items" role="menubar">
        <li id="top-module-list" aria-haspopup="true" role="menuitem" aria-expanded="false" class="navbar-item main-menu-item with-submenu  active">
          <span tabindex="0" id="docs-link" class="main-menu-item-title">Docs</span>
          <span class="caret"></span>
          <ul class="navbar-item-submenu" role="menu">
            <div class="submenu-section">
              <li role="menuitem" class="docs-dropdown-li">
                <a href="/api/" class="docs-dropdown-li__link" tabindex="-1">
                  <div class="docs-dropdown-li__card">
                    <span class="heading">Explore the API Specs</span>
                    <div class="docs-dropdown-li__card-link">
                      <img src="/assets/images/landing-page/view-all-api-specs.png" alt="View all API Specs">
                      <span class="docs-dropdown-li__card-image">
                        View all API Specs
                        <img src="/assets/images/landing-page/arrow-right.svg" alt="View all API Specs arrow image">
                      </span>
                    </div>
                  </div>
                </a>
              </li>

              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <div class="docs-dropdown-li__section">
                  <div class="docs-dropdown-li__section-title">
                    <span class="heading">Documentation</span>
                  </div>

                  <div class="docs-dropdown-li__section-items">
                    <a class="item item-all" href="/api/" tabindex="-1">
                      <div class="item__description">
                        <div class="item__description-title">API Specs</div>
                      </div>
                    </a>
                    
                      <a class="item" href="/gateway/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Gateway</div>
                          <div class="item__description-desc">Lightweight, fast, and flexible cloud-native API gateway</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/konnect/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Konnect</div>
                          <div class="item__description-desc">Single platform for SaaS end-to-end connectivity</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/gateway/latest/ai-gateway/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong AI Gateway</div>
                          <div class="item__description-desc">Multi-LLM AI Gateway for GenAI infrastructure</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/mesh/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Mesh</div>
                          <div class="item__description-desc">Enterprise service mesh based on Kuma and Envoy</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/deck/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">decK</div>
                          <div class="item__description-desc">Helps manage Kong’s configuration in a declarative fashion</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/kubernetes-ingress-controller/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Ingress Controller</div>
                          <div class="item__description-desc">Works inside a Kubernetes cluster and configures Kong to proxy traffic</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/gateway-operator/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Gateway Operator</div>
                          <div class="item__description-desc">Manage your Kong deployments on Kubernetes using YAML Manifests</div>
                        </div>
                      </a>
                    
                      <a class="item" href="https://docs.insomnia.rest/" tabindex="-1" target="_blank" rel="noopener nofollow noreferrer ">
                        
                        <div class="item__description">
                          <div class="item__description-title">Insomnia</div>
                          <div class="item__description-desc">Collaborative API development platform</div>
                        </div>
                      </a>
                    
                  </div>
                </div>
              </li>

            </div>
          </ul>
        </li>

        <li role="menuitem" aria-haspopup="true" aria-expanded="false" class="navbar-item main-menu-item with-submenu navbar-item-hub">
          <span id="plugin-link" class="main-menu-item-title" tabindex="0">Plugin Hub</span>
          <span class="caret"></span>
          <ul class="navbar-item-submenu" role="menu">
            <div class="submenu-section">
              <li role="menuitem" class="docs-dropdown-li">
                <a href="/hub/" class="docs-dropdown-li__link" tabindex="-1">
                  <div class="docs-dropdown-li__card">
                    <span class="heading">Explore the Plugin Hub</span>
                    <div class="docs-dropdown-li__card-link">
                      <img src="/assets/images/landing-page/view-all-plugins.svg" alt="View all plugins">
                      <span class="docs-dropdown-li__card-image">
                        View all plugins
                        <img src="/assets/images/landing-page/arrow-right.svg" alt="View all plugins arrow image">
                      </span>
                    </div>
                  </div>
                </a>
              </li>

              <li role="menuitem" class="docs-dropdown-li">
                <div class="docs-dropdown-li__section">
                  <div class="docs-dropdown-li__section-title">
                    <span class="heading">Functionality</span>
                    <a href="/hub/" class="view-all" tabindex="-1">
                      View all
                      <img src="/assets/images/landing-page/arrow-right.svg" alt="View all arrow image">
                    </a>
                  </div>

                  <div class="docs-dropdown-li__section-items">
                    <a class="item item-all" href="/hub/" tabindex="-1">
                      <div class="item__description">
                        <div class="item__description-title">View all plugins</div>
                      </div>
                    </a>

                    
                      <a class="item" href="/hub/?category=ai" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/ai.svg" alt="AI's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">AI</div>
                          <div class="item__description-desc">Govern, secure, and control AI traffic with multi-LLM AI Gateway plugins</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=authentication" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/lock_person.svg" alt="Authentication's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Authentication</div>
                          <div class="item__description-desc">Protect your services with an authentication layer</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=security" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/shield.svg" alt="Security's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Security</div>
                          <div class="item__description-desc">Protect your services with additional security layer</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=traffic-control" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/route.svg" alt="Traffic Control's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Traffic Control</div>
                          <div class="item__description-desc">Manage, throttle and restrict inbound and outbound API traffic</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=serverless" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/serverless.svg" alt="Serverless's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Serverless</div>
                          <div class="item__description-desc">Invoke serverless functions in combination with other plugins</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=analytics-monitoring" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/bar_chart.svg" alt="Analytics &amp; Monitoring's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Analytics &amp; Monitoring</div>
                          <div class="item__description-desc">Visualize, inspect and monitor APIs and microservices traffic</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=transformations" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/swap_horiz.svg" alt="Transformations's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Transformations</div>
                          <div class="item__description-desc">Transform request and responses on the fly on Kong</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=logging" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/list_alt.svg" alt="Logging's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Logging</div>
                          <div class="item__description-desc">Log request and response data using the best transport for your infrastructure</div>
                        </div>
                      </a>
                    

                  </div>
                </div>
              </li>
            </div>
          </ul>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://support.konghq.com/" class="navbar-item" target="_blank" rel="noopener nofollow noreferrer ">Support</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://konghq.com/community/" class="navbar-item" target="_blank" rel="noopener noreferrer">Community</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://education.konghq.com" class="navbar-item" target="_blank" rel="noopener nofollow noreferrer ">Kong Academy</a>
        </li>
      </ul>
      <a id="top-cta" href="https://konghq.com/contact-sales?utm_source=docs.konghq.com" class="navbar-button" target="_blank" rel="noopener nofollow noreferrer ">
        Get a Demo
      </a>
      <a id="konnect-cta" href="https://konghq.com/products/kong-konnect/register?utm_medium=referral&amp;utm_source=docs&amp;utm_campaign=gateway-konnect&amp;utm_content=top-nav" class="navbar-button" target="_blank" rel="noopener nofollow noreferrer ">
        Start Free Trial
      </a>
    </div>
    <div id="navbar-menu-toggle-button" class="small-screen-button" aria-label="Toggle navigation">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
</header>


    

<div class="page v2 " data-url="/mesh/2.8.x/policies/meshloadbalancingstrategy/">
  <div class="page--header-background page--header-background-doc"></div>
  <div class="container">

    <header class="page-header page-header-doc">
      <div class="page-header-product-version">
        <div class="edition">
          Kong Mesh
          
        </div>
        
        <div class="version">
          2.8.x
          
            <span>(latest)</span>
          
          
        </div>
        
      </div>
      <div class="page-header--nav">
        <i class="sidebar-toggle"></i>

        
          









  <ul class="breadcrumbs">
    <li class="breadcrumb-item">
      <a href="/">
        <img src="/assets/images/icons/hub-layout/icn-breadcrumbs.svg" alt="Home icon">
      </a>
    </li>
    <li class="breadcrumb-item">
      <a href="/mesh/2.8.x/">Kong Mesh</a>
    </li>

    
    
      

      

      
      

      
      

      
        <li class="breadcrumb-item">
          
          Policies
          
        </li>
      
    
      

      

      
      

      
      

      
    

    
    
    <li class="breadcrumb-item">
      <a href="/mesh/2.8.x/policies/meshloadbalancingstrategy/">MeshLoadBalancingStrategy</a>
    </li>
  </ul>

        

        

        <div class="github-links">
  <div class="github-links--edit">
    
      <a href="https://github.com/kumahq/kuma-website/edit/master/app/_src/policies/meshloadbalancingstrategy.md" target="_blank" rel="noopener nofollow noreferrer ">
        <img src="/assets/images/icons/third-party/logo-github-white.svg" alt="github-edit-page">Edit this page
      </a>
    
  </div>
  <div class="github-links--issues">
    <a href="https://github.com/Kong/docs.konghq.com/issues" target="_blank" rel="noopener nofollow noreferrer ">
      <img src="/assets/images/icons/documentation/icn-monitoring-white.svg" alt="report-issue">Report an issue</a>
  </div>
</div>


      </div>
    </header>

    

<aside class="docs-sidebar">
  <i class="fa fa-times close-sidebar"></i>

  <div class="sidebar-title-container">
    <div class="docsets-dropdown dropdown">
      <button class="dropdown-button" id="module-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tabindex="0">
        <span>
          Kong Mesh
          
        </span>
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu dropdown-menu-right with-submenu" id="module-list" role="menu" aria-labelledby="module-dropdown" aria-hidden="true">

        <li role="menuitem" tabindex="-1">
          <a href="/gateway/latest/">Kong Gateway</a>
        </li>
        <li role="menuitem" tabindex="-1">
          <a href="/konnect/">Kong Konnect</a>
        </li>
        <li role="menuitem" tabindex="-1" class="active">
          <a href="/mesh/latest/" class="active">Kong Mesh</a>
        </li>
        <li role="menuitem" tabindex="-1">
          <a href="/hub/?category=ai">Kong AI Gateway</a>
        </li>
        <li role="menuitem" tabindex="-1">
          <a href="/hub/">Plugin Hub</a>
        </li>
        <li role="menuitem" tabindex="-1">
          <a href="/deck/latest/">decK</a>
        </li>
        <li role="menuitem" tabindex="-1">
          <a href="/kubernetes-ingress-controller/latest/">Kong Ingress Controller</a>
        </li>
        <li role="menuitem" tabindex="-1">
          <a href="/gateway-operator/latest/">Kong Gateway Operator</a>
        </li>
        <li>
          <a href="https://docs.insomnia.rest/" target="_blank" rel="noopener nofollow noreferrer ">Insomnia</a>
        </li>
        <li role="menuitem" tabindex="-1">
          <a href="https://kuma.io/docs/" target="_blank" rel="noopener nofollow noreferrer ">Kuma</a>
        </li>
        <hr>
        <li role="menuitem" tabindex="-1">
          <a href="/contributing/">Docs contribution guidelines</a>
        </li>
      </ul>
    </div>

    
    <div class="versions-dropdown dropdown">
      <button class="dropdown-button" id="version-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tabindex="0">
        <span>
          Version 2.8.x
          
            <span>(latest)</span>
          
          
        </span>
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu dropdown-menu-right" id="version-list" role="menu" aria-labelledby="version-dropdown" aria-hidden="true">
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/dev/policies/meshloadbalancingstrategy/" data-version-id="2.9.x">
              <em>dev</em>
            </a>
          </li>
        
          <li class="active" role="menuitem" tabindex="-1">
            <a href="/mesh/2.8.x/policies/meshloadbalancingstrategy/" class="active" data-version-id="2.8.x">
              2.8.x <em>(latest)</em>
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.7.x/policies/meshloadbalancingstrategy/" data-version-id="2.7.x">
              2.7.x (LTS)
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.6.x/policies/meshloadbalancingstrategy/" data-version-id="2.6.x">
              2.6.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.5.x/policies/meshloadbalancingstrategy/" data-version-id="2.5.x">
              2.5.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.4.x/policies/meshloadbalancingstrategy/" data-version-id="2.4.x">
              2.4.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.3.x/policies/meshloadbalancingstrategy/" data-version-id="2.3.x">
              2.3.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.2.x/policies/meshloadbalancingstrategy/" data-version-id="2.2.x">
              2.2.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.1.x/" data-version-id="2.1.x">
              2.1.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/2.0.x/" data-version-id="2.0.x">
              2.0.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.9.x/" data-version-id="1.9.x">
              1.9.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.8.x/" data-version-id="1.8.x">
              1.8.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.7.x/" data-version-id="1.7.x">
              1.7.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.6.x/" data-version-id="1.6.x">
              1.6.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.5.x/" data-version-id="1.5.x">
              1.5.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.4.x/" data-version-id="1.4.x">
              1.4.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.3.x/" data-version-id="1.3.x">
              1.3.x
            </a>
          </li>
        
          <li role="menuitem" tabindex="-1">
            <a href="/mesh/1.2.x/" data-version-id="1.2.x">
              1.2.x
            </a>
          </li>
        
        
      </ul>
    </div>
    
  </div>

  <ul class="sidebar-container" role="tree" aria-label="Documentation">
    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-1-introduction-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-flag.svg" alt="">


Introduction

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Introduction subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-1-introduction-subtree" role="group" aria-label="Introduction">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/introduction/about-service-meshes/">
        

About service meshes

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/">
        

Overview of Kong Mesh

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/introduction/how-kong-mesh-works/">
        

How Kong Mesh works

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/introduction/architecture/">
        

Architecture

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/availability-stages/">
        

Stages of software availability

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/support-policy/">
        

Version support policy

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/sbom/">
        

Software Bill of Materials

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/introduction/kuma-requirements/">
        

Mesh requirements

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/changelog/">
        

Release notes

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-2-quickstart-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-quickstart-color.svg" alt="">


Quickstart

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Quickstart subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-2-quickstart-subtree" role="group" aria-label="Quickstart">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/quickstart/kubernetes-demo/">
        

Deploy Kong Mesh on Kubernetes

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/quickstart/universal-demo/">
        

Deploy Kuma on Universal

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-kong-mesh-in-production-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-deployment-color.svg" alt="">


Kong Mesh in Production

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Kong Mesh in Production subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-kong-mesh-in-production-subtree" role="group" aria-label="Kong Mesh in Production">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/">
        

Overview

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-2-deployment-topologies-subtree">
    
      

Deployment topologies

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Deployment topologies subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-2-deployment-topologies-subtree" role="group" aria-label="Deployment topologies">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/deployment/">
        

Overview

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/deployment/single-zone/">
        

Single-zone deployment

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/deployment/multi-zone/">
        

Multi-zone deployment

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/install-kumactl/">
        

Install kumactl

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/use-mesh/">
        

Use Kong Mesh

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-5-control-plane-deployment-subtree">
    
      

Control plane deployment

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Control plane deployment subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-5-control-plane-deployment-subtree" role="group" aria-label="Control plane deployment">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/license/">
        

Kong Mesh license

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/single-zone/">
        

Deploy a single-zone control plane

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/multi-zone/">
        

Deploy a multi-zone global control plane

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/zone-ingress/">
        

Zone Ingress

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/zoneegress/">
        

Zone Egress

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/zoneproxy-auth/">
        

Configure zone proxy authentication

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/reference/kuma-cp/">
        

Control plane configuration reference

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/systemd/">
        

Systemd

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/kubernetes/">
        

Kubernetes

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/cli/">
        

kumactl

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/cp-deployment/production-usage-values/">
        

Deploy Kong Mesh in Production with Helm

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/mesh/">
        

Configuring your Mesh and multi-tenancy

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-7-data-plane-configuration-subtree">
    
      

Data plane configuration

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Data plane configuration subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-7-data-plane-configuration-subtree" role="group" aria-label="Data plane configuration">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/dp-config/dpp/">
        

Data plane proxy

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/dp-config/dpp-on-kubernetes/">
        

Configure the data plane on Kubernetes

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/dp-config/dpp-on-universal/">
        

Configure the data plane on Universal

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/dp-config/cni/">
        

Configure the Kong Mesh CNI

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/dp-config/transparent-proxying/">
        

Configure transparent proxying

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/dp-config/ipv6/">
        

IPv6 support

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-8-secure-your-deployment-subtree">
    
      

Secure your deployment

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Secure your deployment subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-8-secure-your-deployment-subtree" role="group" aria-label="Secure your deployment">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/secure-deployment/secrets/">
        

Manage secrets

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/secure-deployment/api-server-auth/">
        

Authentication with the API server

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/secure-deployment/dp-auth/">
        

Authentication with the data plane proxy

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/secure-deployment/dp-membership/">
        

Configure data plane proxy membership

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/secure-deployment/certificates/">
        

Secure access accross services

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/rbac/">
        

Kong Mesh RBAC

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/fips-support/">
        

FIPS support

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/gui/">
        

Kong Mesh user interface

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-10-inspect-api-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/inspect-api/">
        

Inspect API

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Inspect API subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-10-inspect-api-subtree" role="group" aria-label="Inspect API">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/inspect-api/#matched-policies">
        

Matched policies

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/inspect-api/#affected-data-plane-proxies">
        

Affected data plane proxies

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/inspect-api/#envoy-proxy-configuration">
        

Envoy proxy configuration

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-11-upgrades-and-tuning-subtree">
    
      

Upgrades and tuning

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Upgrades and tuning subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-11-upgrades-and-tuning-subtree" role="group" aria-label="Upgrades and tuning">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/upgrades-tuning/upgrades/">
        

Upgrade Kong Mesh

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/upgrades-tuning/fine-tuning/">
        

Performance fine-tuning

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/production/upgrades-tuning/upgrade-notes/">
        

Version specific upgrade notes

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-12-control-plane-configuration-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/documentation/configuration/">
        

Control Plane Configuration

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Control Plane Configuration subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-12-control-plane-configuration-subtree" role="group" aria-label="Control Plane Configuration">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/documentation/configuration/#modifying-the-configuration">
        

Modifying the configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/documentation/configuration/#inspecting-the-configuration">
        

Inspecting the configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/documentation/configuration/#store">
        

Store

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-4-using-kong-mesh-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-overview-color.svg" alt="">


Using Kong Mesh

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Using Kong Mesh subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-4-using-kong-mesh-subtree" role="group" aria-label="Using Kong Mesh">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-4-1-zero-trust-application-security-subtree">
    
      

Zero Trust &amp; Application Security

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Zero Trust &amp; Application Security subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-4-1-zero-trust-application-security-subtree" role="group" aria-label="Zero Trust &amp; Application Security">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/mutual-tls/">
        

Mutual TLS

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/external-services/">
        

External Service

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-4-2-resiliency-failover-subtree">
    
      

Resiliency &amp; Failover

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Resiliency &amp; Failover subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-4-2-resiliency-failover-subtree" role="group" aria-label="Resiliency &amp; Failover">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/documentation/health/">
        

Dataplane Health

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/service-health-probes/">
        

Service Health Probes

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-4-3-managing-incoming-traffic-with-gateways-subtree">
    
      

Managing incoming traffic with gateways

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Managing incoming traffic with gateways subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-4-3-managing-incoming-traffic-with-gateways-subtree" role="group" aria-label="Managing incoming traffic with gateways">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/using-mesh/managing-ingress-traffic/overview/">
        

How ingress works in Kuma

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/using-mesh/managing-ingress-traffic/delegated/">
        

Delegated gateways

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/using-mesh/managing-ingress-traffic/builtin/">
        

Built-in gateways

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/using-mesh/managing-ingress-traffic/builtin-k8s/">
        

Running built-in gateway pods on Kubernetes

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/using-mesh/managing-ingress-traffic/builtin-listeners/">
        

Configuring built-in listeners

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/using-mesh/managing-ingress-traffic/builtin-routes/">
        

Configuring built-in routes

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/using-mesh/managing-ingress-traffic/gateway-api/">
        

Using the Kubernetes Gateway API

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-4-4-observability-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/observability/">
        

Observability

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Observability subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-4-4-observability-subtree" role="group" aria-label="Observability">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/observability/#demo-setup">
        

Demo setup

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/observability/#control-plane-observability">
        

Control plane metrics

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/observability/#configuring-prometheus">
        

Configuring Prometheus

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/observability/#configuring-grafana">
        

Configuring Grafana

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/observability/#configuring-datadog">
        

Configuring Datadog

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/explore/observability/#observability-in-multi-zone">
        

Observability in multi-zone

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-4-5-route-traffic-shaping-subtree">
    
      

Route &amp; Traffic shaping

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Route &amp; Traffic shaping subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-4-5-route-traffic-shaping-subtree" role="group" aria-label="Route &amp; Traffic shaping">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/protocol-support-in-kong-mesh/">
        

Protocol support in Kong Mesh

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-4-6-service-discovery-networking-subtree">
    
      

Service Discovery &amp; Networking

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Service Discovery &amp; Networking subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-4-6-service-discovery-networking-subtree" role="group" aria-label="Service Discovery &amp; Networking">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/networking/service-discovery/">
        

Service Discovery

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/networking/meshservice/">
        

MeshService

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/networking/hostnamegenerator/">
        

HostnameGenerator

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/networking/dns/">
        

DNS

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/networking/non-mesh-traffic/">
        

Non-mesh traffic

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/networking/meshexternalservice/">
        

MeshExternalService

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/networking/transparent-proxying/">
        

Transparent Proxying

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-policies-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-documentation-small.svg" alt="">


Policies

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Policies subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-policies-subtree" role="group" aria-label="Policies">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/introduction/">
        

Introduction

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/applying-policies/">
        

Applying Policies

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/targetref/">
        

Understanding TargetRef policies

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-4-meshaccesslog-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshaccesslog/">
        

MeshAccessLog

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshAccessLog subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-4-meshaccesslog-subtree" role="group" aria-label="MeshAccessLog">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshaccesslog/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshaccesslog/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshaccesslog/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-5-meshcircuitbreaker-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshcircuitbreaker/">
        

MeshCircuitBreaker

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshCircuitBreaker subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-5-meshcircuitbreaker-subtree" role="group" aria-label="MeshCircuitBreaker">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshcircuitbreaker/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshcircuitbreaker/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshcircuitbreaker/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-6-meshfaultinjection-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshfaultinjection/">
        

MeshFaultInjection

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshFaultInjection subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-6-meshfaultinjection-subtree" role="group" aria-label="MeshFaultInjection">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshfaultinjection/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshfaultinjection/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshfaultinjection/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-7-meshhealthcheck-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhealthcheck/">
        

MeshHealthCheck

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshHealthCheck subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-7-meshhealthcheck-subtree" role="group" aria-label="MeshHealthCheck">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhealthcheck/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhealthcheck/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhealthcheck/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-8-meshhttproute-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhttproute/">
        

MeshHTTPRoute

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshHTTPRoute subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-8-meshhttproute-subtree" role="group" aria-label="MeshHTTPRoute">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhttproute/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhttproute/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhttproute/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshhttproute/#merging">
        

Merging

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-9-meshmetric-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshmetric/">
        

MeshMetric

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshMetric subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-9-meshmetric-subtree" role="group" aria-label="MeshMetric">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshmetric/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshmetric/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshmetric/#prometheus">
        

Prometheus

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshmetric/#opentelemetry">
        

OpenTelemetry

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshmetric/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-10-meshproxypatch-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshproxypatch/">
        

MeshProxyPatch

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshProxyPatch subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-10-meshproxypatch-subtree" role="group" aria-label="MeshProxyPatch">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshproxypatch/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshproxypatch/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshproxypatch/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshproxypatch/#merging">
        

Merging

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-11-meshratelimit-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshratelimit/">
        

MeshRateLimit

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshRateLimit subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-11-meshratelimit-subtree" role="group" aria-label="MeshRateLimit">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshratelimit/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshratelimit/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshratelimit/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-12-meshretry-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshretry/">
        

MeshRetry

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshRetry subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-12-meshretry-subtree" role="group" aria-label="MeshRetry">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshretry/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshretry/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshretry/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-13-meshtcproute-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtcproute/">
        

MeshTCPRoute

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshTCPRoute subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-13-meshtcproute-subtree" role="group" aria-label="MeshTCPRoute">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtcproute/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtcproute/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtcproute/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtcproute/#route-policies-with-different-types-targeting-the-same-destination">
        

Route policies with different types targeting the same destination

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-14-meshtimeout-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtimeout/">
        

MeshTimeout

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshTimeout subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-14-meshtimeout-subtree" role="group" aria-label="MeshTimeout">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtimeout/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtimeout/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtimeout/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-15-meshtrace-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrace/">
        

MeshTrace

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshTrace subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-15-meshtrace-subtree" role="group" aria-label="MeshTrace">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrace/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrace/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrace/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-16-meshtrafficpermission-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrafficpermission/">
        

MeshTrafficPermission

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshTrafficPermission subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-16-meshtrafficpermission-subtree" role="group" aria-label="MeshTrafficPermission">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrafficpermission/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrafficpermission/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshtrafficpermission/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-17-meshloadbalancingstrategy-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshloadbalancingstrategy/">
        

MeshLoadBalancingStrategy

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshLoadBalancingStrategy subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-17-meshloadbalancingstrategy-subtree" role="group" aria-label="MeshLoadBalancingStrategy">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshloadbalancingstrategy/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshloadbalancingstrategy/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshloadbalancingstrategy/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-18-meshpassthrough-subtree">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshpassthrough/">
        

MeshPassthrough

      </a>
    

    
      <button class="sidebar-tree-toggle" aria-label="toggle MeshPassthrough subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-18-meshpassthrough-subtree" role="group" aria-label="MeshPassthrough">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshpassthrough/#targetref-support-matrix">
        

TargetRef support matrix

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshpassthrough/#configuration">
        

Configuration

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshpassthrough/#examples">
        

Examples

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/meshopa/">
        

MeshOPA

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/meshglobalratelimit/">
        

MeshGlobalRateLimit (beta)

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-5-21-previous-policies-subtree">
    
      

Previous Policies

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Previous Policies subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-5-21-previous-policies-subtree" role="group" aria-label="Previous Policies">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/general-notes-about-kong-mesh-policies/">
        

General notes about Kong Mesh policies

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/how-kong-mesh-chooses-the-right-policy-to-apply/">
        

How Kong Mesh chooses the right policy to apply

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/traffic-permissions/">
        

Traffic Permissions

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/traffic-route/">
        

Traffic Route

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/traffic-metrics/">
        

Traffic Metrics

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/traffic-trace/">
        

Traffic Trace

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/traffic-log/">
        

Traffic Log

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/locality-aware/">
        

Locality-aware Load Balancing

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/fault-injection/">
        

Fault Injection

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/health-check/">
        

Health Check

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/circuit-breaker/">
        

Circuit Breaker

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/retry/">
        

Retry

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/timeout/">
        

Timeout

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/rate-limit/">
        

Rate Limit

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/virtual-outbound/">
        

Virtual Outbound

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/policies/meshgatewayroute/">
        

MeshGatewayRoute

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/opa/">
        

OPA policy

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-6-guides-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-learning.svg" alt="">


Guides

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Guides subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-6-guides-subtree" role="group" aria-label="Guides">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/guides/federate/">
        

Federate zone control plane

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/guides/gateway-builtin/">
        

Add a builtin Gateway

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/guides/gateway-delegated/">
        

Add Kong as a delegated Gateway

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/guides/otel-metrics/">
        

Collect Metrics with OpenTelemetry

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/guides/migration-to-the-new-policies/">
        

Migration to the new policies

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-7-enterprise-features-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-enterprise-blue.svg" alt="">


Enterprise Features

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Enterprise Features subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-7-enterprise-features-subtree" role="group" aria-label="Enterprise Features">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/">
        

Overview

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/vault/">
        

HashiCorp Vault CA

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/acmpca/">
        

Amazon ACM Private CA

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/cert-manager/">
        

cert-manager Private CA

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/opa/">
        

OPA policy support

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/meshopa/">
        

MeshOPA (beta)

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/kds-auth/">
        

Multi-zone authentication

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/fips-support/">
        

FIPS support

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/ca-rotation/">
        

Certificate Authority rotation

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/rbac/">
        

Role-Based Access Control

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-7-11-red-hat-subtree">
    
      

Red Hat

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Red Hat subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-7-11-red-hat-subtree" role="group" aria-label="Red Hat">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/ubi-images/">
        

UBI Images

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/openshift-quickstart/">
        

Red Hat OpenShift Quickstart

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/installation/ecs/">
        

ECS Support

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/access-audit/">
        

Auditing

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/meshglobalratelimit/">
        

MeshGlobalRateLimit (beta)

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/signed-images/">
        

Verify signatures for signed Kong Mesh images

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-7-16-build-provenance-subtree">
    
      

Build provenance

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Build provenance subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-7-16-build-provenance-subtree" role="group" aria-label="Build provenance">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/provenance-verification-images/">
        

Verify build provenance for signed Kong Mesh images

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/features/provenance-verification-binaries/">
        

Verify build provenance for signed Kong Mesh binaries

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-8-reference-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-references-color.svg" alt="">


Reference

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Reference subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-8-reference-subtree" role="group" aria-label="Reference">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/reference/http-api/">
        

HTTP API

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/reference/kubernetes-annotations/">
        

Kubernetes annotations and labels

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/reference/data-collection/">
        

Kuma data collection

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/reference/kuma-cp/">
        

Control plane configuration reference

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/mesh/2.8.x/reference/proxy-template/">
        

Envoy proxy template

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-9-community-subtree">
    
      
  <img src="/assets/images/icons/documentation/icn-references-color.svg" alt="">


Community

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Community subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-9-community-subtree" role="group" aria-label="Community">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="https://kuma.io/community/" target="_blank" rel="noopener nofollow noreferrer ">
        

Contribute to Kuma

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

    
  </ul>
</aside>




      <aside class="docs-toc">
        <i class="fa fa-times close-sidebar"></i>
        <i class="fa fa-chevron-right collapse-toc"></i>
        <i class="far fa-list-alt expand-toc"></i>

        <div id="oss-ee-toggle" data-current="Enterprise" style="display: none">
          <span class="oss-ee-toggle-inner">
            <img src="/assets/images/icons/icn-enterprise-black.svg" alt="enterprise-switcher-icon">
            <span>Switch to <span id="switch-to-version">OSS</span></span>
          </span>
        </div>

        
        <div class="docs-toc-title">
<img src="/assets/images/icons/hub-layout/icn-on-this-page.svg" alt="On this page"><a href="#">On this page</a>
</div>
<ul>
  <li><a href="#targetref-support-matrix" class="active scroll-to">TargetRef support matrix</a></li>
  <li>
<a href="#configuration" class="scroll-to">Configuration</a>
    <ul>
      <li><a href="#localityawareness" class="scroll-to">LocalityAwareness</a></li>
      <li><a href="#loadbalancer" class="scroll-to">LoadBalancer</a></li>
    </ul>
  </li>
  <li>
<a href="#examples" class="scroll-to">Examples</a>
    <ul>
      <li><a href="#ringhash-load-balancing-from-web-to-backend" class="scroll-to">RingHash load balancing from web to backend</a></li>
      <li><a href="#disable-locality-aware-load-balancing-for-backend" class="scroll-to">Disable locality-aware load balancing for backend</a></li>
      <li><a href="#disable-cross-zone-traffic-and-prioritize-traffic-the-dataplanes-on-the-same-node-and-availability-zone" class="scroll-to">Disable cross zone traffic and prioritize traffic the dataplanes on the same node and availability zone</a></li>
      <li><a href="#disable-cross-zone-traffic-and-route-to-the-local-zone-instances-equally" class="scroll-to">Disable cross zone traffic and route to the local zone instances equally</a></li>
      <li><a href="#route-within-the-local-zone-equally-but-specify-cross-zone-order" class="scroll-to">Route within the local zone equally, but specify cross zone order</a></li>
      <li><a href="#prioritize-traffic-to-dataplanes-within-the-same-datacenter-and-fallback-cross-zone-in-specific-order" class="scroll-to">Prioritize traffic to dataplanes within the same datacenter and fallback cross zone in specific order</a></li>
    </ul>
  </li>
  <li><a href="#load-balancing-http-traffic-through-zone-proxies" class="scroll-to">Load balancing HTTP traffic through zone proxies</a></li>
  <li><a href="#all-policy-options" class="scroll-to">All policy options</a></li>
</ul>

        
      </aside>

    <div class="page-content-container page-content-container-doc v2 " id="documentation">
      <div class="toggles ">
          <i class="far fa-list-alt toc-sidebar-toggle"></i>
      </div>

      <div class="page-content">
        <div class="content show-anchor-links">
          

          <h1 tabindex="-1" id="main" class="page-content-title">MeshLoadBalancingStrategy
            

            
          </h1>

          

          
          

          <blockquote class="important">
  <p>
</p>
<p>This policy uses new policy matching algorithm.</p>

</blockquote>

<p>This policy enables Kong Mesh to configure the load balancing strategy for traffic between services in the mesh.
When using this policy, the <a href="/mesh/2.8.x/policies/locality-aware">localityAwareLoadBalancing</a> flag is ignored.</p>

<h2 id="targetref-support-matrix">TargetRef support matrix</h2>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Sidecar" class="navtab-title" role="tab" aria-controls="Sidecar" tabindex="0">
      Sidecar 
    </div>
  
    
    <div data-slug="-w" data-navtab-id="Builtin-Gateway" class="navtab-title" role="tab" aria-controls="Builtin-Gateway" tabindex="0">
      Builtin Gateway 
    </div>
  
    
    <div data-slug="-w" data-navtab-id="Delegated-Gateway" class="navtab-title" role="tab" aria-controls="Delegated-Gateway" tabindex="0">
      Delegated Gateway 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Sidecar" class="navtab-content" role="tabpanel" id="Sidecar" tabindex="0">
      
<table>
  <thead>
    <tr>
      <th><code class="language-plaintext highlighter-rouge">targetRef</code></th>
      <th>Allowed kinds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">targetRef.kind</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">Mesh</code>, <code class="language-plaintext highlighter-rouge">MeshSubset</code>, <code class="language-plaintext highlighter-rouge">MeshService</code>, <code class="language-plaintext highlighter-rouge">MeshServiceSubset</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">to[].targetRef.kind</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">Mesh</code>, <code class="language-plaintext highlighter-rouge">MeshService</code>
</td>
    </tr>
  </tbody>
</table>

    </div>
  
    <div data-navtab-content="Builtin-Gateway" class="navtab-content" role="tabpanel" id="Builtin-Gateway" tabindex="0">
      
<table>
  <thead>
    <tr>
      <th><code class="language-plaintext highlighter-rouge">targetRef</code></th>
      <th>Allowed kinds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">targetRef.kind</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">Mesh</code>, <code class="language-plaintext highlighter-rouge">MeshGateway</code>, <code class="language-plaintext highlighter-rouge">MeshGateway</code> with listener <code class="language-plaintext highlighter-rouge">tags</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">to[].targetRef.kind</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">Mesh</code>, <code class="language-plaintext highlighter-rouge">MeshService</code>
</td>
    </tr>
  </tbody>
</table>

    </div>
  
    <div data-navtab-content="Delegated-Gateway" class="navtab-content" role="tabpanel" id="Delegated-Gateway" tabindex="0">
      
<table>
  <thead>
    <tr>
      <th><code class="language-plaintext highlighter-rouge">targetRef</code></th>
      <th>Allowed kinds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">targetRef.kind</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">Mesh</code>, <code class="language-plaintext highlighter-rouge">MeshSubset</code>, <code class="language-plaintext highlighter-rouge">MeshService</code>, <code class="language-plaintext highlighter-rouge">MeshServiceSubset</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">to[].targetRef.kind</code></td>
      <td>
<code class="language-plaintext highlighter-rouge">Mesh</code>, <code class="language-plaintext highlighter-rouge">MeshService</code>
</td>
    </tr>
  </tbody>
</table>

    </div>
  
  </div>
</div>

<p>To learn more about the information in this table, see the <a href="/mesh/2.8.x/policies/targetref">matching docs</a>.</p>

<h2 id="configuration">Configuration</h2>

<h3 id="localityawareness">LocalityAwareness</h3>
<p>Locality-aware load balancing provides robust and straightforward method for balancing traffic within and across zones. This not only allows you to route traffic across zones when the local zone service is unhealthy but also enables you to define traffic prioritization within the local zone and set cross-zone fallback priorities.</p>

<h4 id="default-behaviour">Default behaviour</h4>
<p>Locality-aware load balancing is enabled by default, unlike its predecessor <a href="/mesh/2.8.x/policies/locality-aware">localityAwareLoadBalancing</a>. Requests are distributed across all endpoints within the local zone first unless there are not enough healthy endpoints.</p>

<h4 id="disabling-locality-aware-routing">Disabling locality aware routing</h4>
<p>If you do so, all endpoints regardless of their zone will be treated equally. To do this do:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">localityAwareness</span><span class="pi">:</span>
  <span class="na">disabled</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div>

<h4 id="configuring-localityaware-load-balancing-for-traffic-within-the-same-zone">Configuring LocalityAware Load Balancing for traffic within the same zone</h4>
<blockquote class="important">
  <p>
</p>
<p>If <code>crossZone</code> and/or <code>localZone</code> is defined, they take precedence over <code>disabled</code> and apply more specific configuration.</p>

</blockquote>

<p>Local zone routing allows you to define traffic routing rules within a local zone, prioritizing data planes based on tags and their associated weights. This enables you to allocate specific traffic percentages to data planes with particular tags within the local zone. If there are no healthy endpoints within the highest priority group, the next priority group takes precedence. Locality awareness within the local zone relies on tags within inbounds, so it’s crucial to ensure that the tags used in the policy are defined for the service (Dataplane object on Universal, PodTemplate labels on Kubernetes).</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">localZone</code></strong> - (optional) allows to define load balancing priorities between dataplanes in the local zone. When not defined, traffic is distributed equally to all endpoints within the local zone.
    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">affinityTags</code></strong> - list of tags and their weights based on which traffic is load balanced
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">key</code></strong> - defines tag for which affinity is configured. The tag needs to be configured on the inbound of the service. In case of Kubernetes, pod needs to have a label. On Universal user needs to define it on the inbound of the service. If the tag is absent this entry is skipped.</li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">weight</code></strong> - (optional) weight of the tag used for load balancing. The bigger the weight the higher number of requests is routed to dataplanes with specific tag. By default we will adjust them so that 90% traffic goes to first tag, 9% to next, and 1% to third and so on.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="configuring-localityaware-load-balancing-for-traffic-across-zones">Configuring LocalityAware Load Balancing for traffic across zones</h4>
<blockquote class="important">
  <p>
</p>
<p>Remember that cross-zone traffic requires <a href="/mesh/2.8.x/policies/mutual-tls">mTLS to be enabled</a>.</p>

</blockquote>

<p>Advanced locality-aware load balancing provides a powerful means of defining how your service should behave when there is no instances of your service available or they are in a degraded state in your local zone. With this feature, you have the flexibility to configure the fallback behavior of your service, specifying the order in which it should attempt fallback options and defining different behaviors for instances located in various zones.</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">crossZone</code></strong> - (optional) allows to define behaviour when there is no healthy instances of the service. When not defined, cross zone traffic is disabled.
    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">failover</code></strong> - defines a list of load balancing rules in order of priority. If a zone is not specified explicitly by name or implicitly using the type <code class="language-plaintext highlighter-rouge">Any</code>/<code class="language-plaintext highlighter-rouge">AnyExcept</code> it is excluded from receiving traffic. By default, the last rule is always <code class="language-plaintext highlighter-rouge">None</code> which means, that there is no traffic to other zones after specified rules.
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">from</code></strong> - (optional) defines the list of zones to which the rule applies. If not specified, rule is applied to all zones.
            <ul>
              <li>
<strong><code class="language-plaintext highlighter-rouge">zones</code></strong> - list of zone names.</li>
            </ul>
          </li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">to</code></strong> - defines to which zones the traffic should be load balanced.
            <ul>
              <li>
<strong><code class="language-plaintext highlighter-rouge">type</code></strong> - defines how target zones will be picked from available zones. Available options:
                <ul>
                  <li>
<strong><code class="language-plaintext highlighter-rouge">Any</code></strong> - traffic will be load balanced to every available zone.</li>
                  <li>
<strong><code class="language-plaintext highlighter-rouge">Only</code></strong> - traffic will be load balanced only to zones specified in zones list.</li>
                  <li>
<strong><code class="language-plaintext highlighter-rouge">AnyExcept</code></strong> - traffic will be load balanced to every available zone except those specified in zones list.</li>
                  <li>
<strong><code class="language-plaintext highlighter-rouge">None</code></strong> - traffic will not be load balanced to any zone.</li>
                </ul>
              </li>
              <li>
<strong><code class="language-plaintext highlighter-rouge">zones</code></strong> - list of zone names</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">failoverThreshold.percentage</code></strong> - (optional) defines the percentage of live destination dataplane proxies below which load balancing to the next priority starts. .e.g: If you have this set to 70 and you have 10 dataplane proxies it will start load balancing to the next priority when the number of healthy destinations falls under 7. The value to be in (0.0 - 100.0] range (Default 50). If the value is a double number, put it in quotes.</li>
    </ul>
  </li>
</ul>

<h4 id="zone-egress-support">Zone Egress support</h4>

<p>Using Zone Egress Proxy in multizone deployment poses certain limitations for this feature. When configuring <code class="language-plaintext highlighter-rouge">MeshLoadbalancingStrategy</code> with Zone Egress you can only use <code class="language-plaintext highlighter-rouge">Mesh</code> as a top level targetRef. This is because we don’t differentiate requests that come to Zone Egress from different clients, yet.</p>

<p>Moreover, Zone Egress is a simple proxy that uses long-lived L4 connection with each Zone Ingresses. Consequently, when a new <code class="language-plaintext highlighter-rouge">MeshLoadbalancingStrategy</code> with locality awareness is configured, connections won’t be refreshed, and locality awareness will apply only to new connections.</p>

<p>Another thing you need to be aware of is how outbound traffic behaves when you use the <code class="language-plaintext highlighter-rouge">MeshCircuitBreaker</code>’s outlier detection to keep track of healthy endpoints. Normally, you would use <code class="language-plaintext highlighter-rouge">MeshCircuitBreaker</code> to act on failures and trigger traffic redirect to the next priority level if the number of healthy endpoints fall below <code class="language-plaintext highlighter-rouge">crossZone.failoverThreshold</code>. When you have a single instance of Zone Egress, all remote zones will be behind a single endpoint. Since <code class="language-plaintext highlighter-rouge">MeshCircuitBreaker</code> is configured on Data Plane Proxy, when one of the zones start responding with errors it will mark the whole Zone Egress as not healthy and won’t send traffic there even though there could be multiple zones with live endpoints. This will be changed in the future with overall improvements to the Zone Egress proxy.</p>

<h3 id="loadbalancer">LoadBalancer</h3>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">type</code></strong> - available values are <code class="language-plaintext highlighter-rouge">RoundRobin</code>, <code class="language-plaintext highlighter-rouge">LeastRequest</code>, <code class="language-plaintext highlighter-rouge">RingHash</code>, <code class="language-plaintext highlighter-rouge">Random</code>, <code class="language-plaintext highlighter-rouge">Maglev</code>.</li>
</ul>

<h4 id="roundrobin">RoundRobin</h4>

<p>RoundRobin is a load balancing algorithm that distributes requests across available upstream hosts in round-robin order.</p>

<h4 id="leastrequest">LeastRequest</h4>

<p>LeastRequest selects N random available hosts as specified in ‘choiceCount’ (2 by default) and picks the host which has 
the fewest active requests.</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">choiceCount</code></strong> - (optional) is the number of random healthy hosts from which the host with the fewest active requests will 
be chosen. Defaults to 2 so that Envoy performs two-choice selection if the field is not set.</li>
</ul>

<h4 id="ringhash">RingHash</h4>

<p>RingHash  implements consistent hashing to upstream hosts. Each host is mapped onto a circle (the “ring”) by hashing its 
address; each request is then routed to a host by hashing some property of the request, and finding the nearest 
corresponding host clockwise around the ring.</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hashFunction</code></strong> - (optional) available values are <code class="language-plaintext highlighter-rouge">XX_HASH</code>, <code class="language-plaintext highlighter-rouge">MURMUR_HASH_2</code>. Default is <code class="language-plaintext highlighter-rouge">XX_HASH</code>.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">minRingSize</code></strong> - (optional) minimum hash ring size. The larger the ring is (that is, the more hashes there are for 
each provided host) the better the request distribution will reflect the desired weights. Defaults to 1024 entries, and 
limited to 8M entries.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">maxRingSize</code></strong> - (optional) maximum hash ring size. Defaults to 8M entries, and limited to 8M entries, but can be 
lowered to further constrain resource use.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hashPolicies</code></strong> - (optional) specify a list of request/connection properties that are used to calculate a hash.
These hash policies are executed in the specified order. If a hash policy has the “terminal” attribute set to true, and 
there is already a hash generated, the hash is returned immediately, ignoring the rest of the hash policy list.
    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">type</code></strong> - available values are <code class="language-plaintext highlighter-rouge">Header</code>, <code class="language-plaintext highlighter-rouge">Cookie</code>, <code class="language-plaintext highlighter-rouge">Connection</code>, <code class="language-plaintext highlighter-rouge">QueryParameter</code>, <code class="language-plaintext highlighter-rouge">FilterState</code>
</li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">terminal</code></strong> - is a flag that short-circuits the hash computing. This field provides a ‘fallback’ style of 
configuration: “if a terminal policy doesn’t work, fallback to rest of the policy list”, it saves time when the 
terminal policy works. If true, and there is already a hash computed, ignore rest of the list of hash polices.</li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">header</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">name</code></strong> - the name of the request header that will be used to obtain the hash key.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">cookie</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">name</code></strong> - the name of the cookie that will be used to obtain the hash key.</li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">ttl</code></strong> - (optional) if specified, a cookie with the TTL will be generated if the cookie is not present.</li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">path</code></strong> - (optional) the name of the path for the cookie.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">connection</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">sourceIP</code></strong> - if true, then hashing is based on a source IP address.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">queryParameter</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">name</code></strong> - the name of the URL query parameter that will be used to obtain the hash key. If the parameter is not 
present, no hash will be produced. Query parameter names are case-sensitive.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">filterState</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">key</code></strong> – the name of the Object in the per-request filterState, which is an Envoy::Hashable object. If there is 
no data associated with the key, or the stored object is not Envoy::Hashable, no hash will be produced.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="random">Random</h4>

<p>Random selects a random available host. The random load balancer generally performs better than round-robin if no health 
checking policy is configured. Random selection avoids bias towards the host in the set that comes after a failed host.</p>

<h4 id="maglev">Maglev</h4>

<p>Maglev implements consistent hashing to upstream hosts. Maglev can be used as a drop in replacement for the ring hash 
load balancer any place in which consistent hashing is desired.</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">tableSize</code></strong> - (optional) the table size for Maglev hashing. Maglev aims for “minimal disruption” rather than an 
absolute guarantee. Minimal disruption means that when the set of upstream hosts change, a connection will likely be 
sent to the same upstream as it was before. Increasing the table size reduces the amount of disruption. The table size 
must be prime number limited to 5000011. If it is not specified, the default is 65537.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">hashPolicies</code></strong> - (optional) specify a list of request/connection properties that are used to calculate a hash.
These hash policies are executed in the specified order. If a hash policy has the “terminal” attribute set to true, and
there is already a hash generated, the hash is returned immediately, ignoring the rest of the hash policy list.
    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">type</code></strong> - available values are <code class="language-plaintext highlighter-rouge">Header</code>, <code class="language-plaintext highlighter-rouge">Cookie</code>, <code class="language-plaintext highlighter-rouge">Connection</code>, <code class="language-plaintext highlighter-rouge">QueryParameter</code>, <code class="language-plaintext highlighter-rouge">FilterState</code>
</li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">terminal</code></strong> - is a flag that short-circuits the hash computing. This field provides a ‘fallback’ style of
configuration: “if a terminal policy doesn’t work, fallback to rest of the policy list”, it saves time when the
terminal policy works. If true, and there is already a hash computed, ignore rest of the list of hash polices.</li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">header</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">name</code></strong> - the name of the request header that will be used to obtain the hash key.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">cookie</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">name</code></strong> - the name of the cookie that will be used to obtain the hash key.</li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">ttl</code></strong> - (optional) if specified, a cookie with the TTL will be generated if the cookie is not present.</li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">path</code></strong> - (optional) the name of the path for the cookie.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">connection</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">sourceIP</code></strong> - if true, then hashing is based on a source IP address.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">queryParameter</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">name</code></strong> - the name of the URL query parameter that will be used to obtain the hash key. If the parameter is not
present, no hash will be produced. Query parameter names are case-sensitive.</li>
        </ul>
      </li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">filterState</code></strong>:
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">key</code></strong> – the name of the Object in the per-request filterState, which is an Envoy::Hashable object. If there is
no data associated with the key, or the stored object is not Envoy::Hashable, no hash will be produced.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="examples">Examples</h2>

<h3 id="ringhash-load-balancing-from-web-to-backend">RingHash load balancing from web to backend</h3>

<p>Load balance requests from <code class="language-plaintext highlighter-rouge">web</code> to <code class="language-plaintext highlighter-rouge">backend</code> based on the HTTP header <code class="language-plaintext highlighter-rouge">x-header</code>:</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">kind</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">ring-hash</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">web</span>
  <span class="na">to</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
        <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
      <span class="na">default</span><span class="pi">:</span>
        <span class="na">loadBalancer</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">RingHash</span>
          <span class="na">ringHash</span><span class="pi">:</span>
            <span class="na">hashPolicies</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">Header</span>
                <span class="na">header</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">x-header</span>
</code></pre></div></div>

<p>Apply the configuration with <code class="language-plaintext highlighter-rouge">kubectl apply -f [..]</code>.</p>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">ring-hash</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">web</span>
  <span class="na">to</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
        <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
      <span class="na">default</span><span class="pi">:</span>
        <span class="na">loadBalancer</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">RingHash</span>
          <span class="na">ringHash</span><span class="pi">:</span>
            <span class="na">hashPolicies</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">Header</span>
                <span class="na">header</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">x-header</span>
</code></pre></div></div>

<p>Apply the configuration with <code class="language-plaintext highlighter-rouge">kumactl apply -f [..]</code> or with the <a href="/mesh/2.8.x/reference/http-api">HTTP API</a>.</p>


    </div>
  
  </div>
</div>

<h3 id="disable-locality-aware-load-balancing-for-backend">Disable locality-aware load balancing for backend</h3>

<p>Requests to <code class="language-plaintext highlighter-rouge">backend</code> will be spread evenly across all zones where <code class="language-plaintext highlighter-rouge">backend</code> is deployed.</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">kind</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">disable-la-to-backend</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
        <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
      <span class="na">default</span><span class="pi">:</span>
        <span class="na">localityAwareness</span><span class="pi">:</span>
          <span class="na">disabled</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div>

<p>Apply the configuration with <code class="language-plaintext highlighter-rouge">kubectl apply -f [..]</code>.</p>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">disable-la-to-backend</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
        <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
      <span class="na">default</span><span class="pi">:</span>
        <span class="na">localityAwareness</span><span class="pi">:</span>
          <span class="na">disabled</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div>

<p>Apply the configuration with <code class="language-plaintext highlighter-rouge">kumactl apply -f [..]</code> or with the <a href="/mesh/2.8.x/reference/http-api">HTTP API</a>.</p>


    </div>
  
  </div>
</div>

<h3 id="disable-cross-zone-traffic-and-prioritize-traffic-the-dataplanes-on-the-same-node-and-availability-zone">Disable cross zone traffic and prioritize traffic the dataplanes on the same node and availability zone</h3>

<p>In this example, whenever a user sends a request to the <code class="language-plaintext highlighter-rouge">backend</code> service, 90% of the requests will arrive at the instance with the same value of the <code class="language-plaintext highlighter-rouge">k8s.io/node</code> tag, 9% of the requests will go to the instance with the same value as the caller of the <code class="language-plaintext highlighter-rouge">k8s.io/az</code> tag, and 1% will go to the rest of the instances.</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-backend</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span>
          <span class="na">affinityTags</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">k8s.io/node</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">k8s.io/az</span>
</code></pre></div></div>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-backend</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span>
          <span class="na">affinityTags</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">k8s.io/node</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">k8s.io/az</span>
</code></pre></div></div>


    </div>
  
  </div>
</div>

<h3 id="disable-cross-zone-traffic-and-route-to-the-local-zone-instances-equally">Disable cross zone traffic and route to the local zone instances equally</h3>

<p>In this example, when a user sends a request to the backend service, the request is routed equally to all instances in the local zone. If there are no instances in the local zone, the request will fail because there is no cross zone traffic.</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-backend</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span>
          <span class="na">affinityTags</span><span class="pi">:</span> <span class="pi">[]</span>
</code></pre></div></div>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-backend</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span>
          <span class="na">affinityTags</span><span class="pi">:</span> <span class="pi">[]</span>
</code></pre></div></div>


    </div>
  
  </div>
</div>

<p>or</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-backend</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-backend</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>


    </div>
  
  </div>
</div>

<h3 id="route-within-the-local-zone-equally-but-specify-cross-zone-order">Route within the local zone equally, but specify cross zone order</h3>

<p>Requests to the backend service will be evenly distributed among all endpoints within the local zone. If there are fewer than 25% healthy hosts in the local zone, traffic will be redirected to other zones. Initially, traffic will be sent to the <code class="language-plaintext highlighter-rouge">us-1</code> zone. In the event that the <code class="language-plaintext highlighter-rouge">us-1</code> zone becomes unavailable, traffic will then be directed to all zones, except for <code class="language-plaintext highlighter-rouge">us-2</code> and <code class="language-plaintext highlighter-rouge">us-3</code>. If these zones are also found to have unhealthy hosts, the traffic will be rerouted to <code class="language-plaintext highlighter-rouge">us-2</code> and <code class="language-plaintext highlighter-rouge">us-3</code>.</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">cross-zone-backend</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">crossZone</span><span class="pi">:</span>
          <span class="na">failover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-1</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">AnyExcept</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-2</span>
              <span class="pi">-</span> <span class="s">us-3</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Any</span>
          <span class="na">failoverThreshold</span><span class="pi">:</span>
            <span class="na">percentage</span><span class="pi">:</span> <span class="m">25</span>
</code></pre></div></div>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">cross-zone-backend</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">crossZone</span><span class="pi">:</span>
          <span class="na">failover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-1</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">AnyExcept</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-2</span>
              <span class="pi">-</span> <span class="s">us-3</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Any</span>
          <span class="na">failoverThreshold</span><span class="pi">:</span>
            <span class="na">percentage</span><span class="pi">:</span> <span class="m">25</span>
</code></pre></div></div>


    </div>
  
  </div>
</div>

<h3 id="prioritize-traffic-to-dataplanes-within-the-same-datacenter-and-fallback-cross-zone-in-specific-order">Prioritize traffic to dataplanes within the same datacenter and fallback cross zone in specific order</h3>

<p>Requests to backend will be distributed based on weights, with 99.9% of requests routed to data planes in the same datacenter, 0.099% to data planes in the same region, and the remainder to other local instances.</p>

<p>When no healthy backends are available within the local zone, traffic from data planes in zones <code class="language-plaintext highlighter-rouge">us-1</code>, <code class="language-plaintext highlighter-rouge">us-2</code>, and <code class="language-plaintext highlighter-rouge">us-3</code> will only fall back to zones <code class="language-plaintext highlighter-rouge">us-1</code>, <code class="language-plaintext highlighter-rouge">us-2</code>, and <code class="language-plaintext highlighter-rouge">us-3</code>, while in zones <code class="language-plaintext highlighter-rouge">eu-1</code>, <code class="language-plaintext highlighter-rouge">eu-2</code>, and <code class="language-plaintext highlighter-rouge">eu-3</code> will only fall back to zones <code class="language-plaintext highlighter-rouge">eu-1</code>, <code class="language-plaintext highlighter-rouge">eu-2</code>, and <code class="language-plaintext highlighter-rouge">eu-3</code>. If there are no healthy instances in all zones <code class="language-plaintext highlighter-rouge">eu-[1-3]</code> or <code class="language-plaintext highlighter-rouge">us-[1-3]</code>, requests from any instance will then fall back to <code class="language-plaintext highlighter-rouge">us-4</code>. If there are no healthy instances in <code class="language-plaintext highlighter-rouge">us-4</code>, the request will fail, as the last rule, by default, has a type of <code class="language-plaintext highlighter-rouge">None</code>, meaning no fallback is allowed.</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-cross-backend</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span>
          <span class="na">affinityTags</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">kubernetes.io/hostname</span>
            <span class="na">weight</span><span class="pi">:</span> <span class="m">9000</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">topology.kubernetes.io/zone</span>
            <span class="na">weight</span><span class="pi">:</span> <span class="m">9</span>
        <span class="na">crossZone</span><span class="pi">:</span>
          <span class="na">failover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">from</span><span class="pi">:</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-1</span>
              <span class="pi">-</span> <span class="s">us-2</span>
              <span class="pi">-</span> <span class="s">us-3</span>
            <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-1</span>
              <span class="pi">-</span> <span class="s">us-2</span>
              <span class="pi">-</span> <span class="s">us-3</span>
          <span class="pi">-</span> <span class="na">from</span><span class="pi">:</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">eu-1</span>
              <span class="pi">-</span> <span class="s">eu-2</span>
              <span class="pi">-</span> <span class="s">eu-3</span>
            <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">eu-1</span>
              <span class="pi">-</span> <span class="s">eu-2</span>
              <span class="pi">-</span> <span class="s">eu-3</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-4</span>
</code></pre></div></div>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshLoadBalancingStrategy</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">local-zone-affinity-cross-backend</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">to</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">MeshService</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">backend</span>
    <span class="na">default</span><span class="pi">:</span>
      <span class="na">localityAwareness</span><span class="pi">:</span>
        <span class="na">localZone</span><span class="pi">:</span>
          <span class="na">affinityTags</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">kubernetes.io/hostname</span>
            <span class="na">weight</span><span class="pi">:</span> <span class="m">9000</span>
          <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">topology.kubernetes.io/zone</span>
            <span class="na">weight</span><span class="pi">:</span> <span class="m">9</span>
        <span class="na">crossZone</span><span class="pi">:</span>
          <span class="na">failover</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">from</span><span class="pi">:</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-1</span>
              <span class="pi">-</span> <span class="s">us-2</span>
              <span class="pi">-</span> <span class="s">us-3</span>
            <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-1</span>
              <span class="pi">-</span> <span class="s">us-2</span>
              <span class="pi">-</span> <span class="s">us-3</span>
          <span class="pi">-</span> <span class="na">from</span><span class="pi">:</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">eu-1</span>
              <span class="pi">-</span> <span class="s">eu-2</span>
              <span class="pi">-</span> <span class="s">eu-3</span>
            <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">eu-1</span>
              <span class="pi">-</span> <span class="s">eu-2</span>
              <span class="pi">-</span> <span class="s">eu-3</span>
          <span class="pi">-</span> <span class="na">to</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">Only</span>
              <span class="na">zones</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="s">us-4</span>
</code></pre></div></div>


    </div>
  
  </div>
</div>

<h2 id="load-balancing-http-traffic-through-zone-proxies">Load balancing HTTP traffic through zone proxies</h2>

<p>If you proxy HTTP traffic through zone proxies (zone ingress/egress), you may notice that the traffic does not reach every instance of the destination service.
In the case of in-zone traffic (without zone proxies on a request path), the client is aware of all server endpoints, so if you have 10 server endpoints the traffic goes to all of them.
In the case of cross-zone traffic, the client is only aware of zone ingress endpoints, so if you have 10 server endpoints and 1 zone ingress, the client only sees one zone ingress endpoint.
Because zone ingress is just a TCP passthrough proxy (it does not terminate TLS), it only load balances TCP connections over server endpoints.</p>

<p>HTTP traffic between Envoys is upgraded to HTTP/2 automatically for performance benefits. The client’s Envoy leverages HTTP/2 multiplexing therefore it opens only a few TCP connections.</p>

<p>You can mitigate this problem by adjusting <code class="language-plaintext highlighter-rouge">max_requests_per_connection</code> setting on Envoy Cluster. For example</p>

<div class="navtabs code">
  <div class="navtab-titles" role="tablist">
    
    
    <div data-slug="" data-navtab-id="Kubernetes" class="navtab-title" role="tab" aria-controls="Kubernetes" tabindex="0">
      Kubernetes 
    </div>
  
    
    <div data-slug="" data-navtab-id="Universal" class="navtab-title" role="tab" aria-controls="Universal" tabindex="0">
      Universal 
    </div>
  
  </div>
  <div class="navtab-contents">
  
    <div data-navtab-content="Kubernetes" class="navtab-content" role="tabpanel" id="Kubernetes" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kuma.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">MeshProxyPatch</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">max-requests-per-conn</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kong-mesh-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">kuma.io/mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">default</span><span class="pi">:</span>
    <span class="na">appendModifications</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">cluster</span><span class="pi">:</span>
        <span class="na">operation</span><span class="pi">:</span> <span class="s">Patch</span>
        <span class="na">match</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">demo-app_kuma-demo_svc_5000</span>
          <span class="na">origin</span><span class="pi">:</span> <span class="s">outbound</span>
        <span class="na">value</span><span class="pi">:</span> <span class="s1">'</span><span class="s">max_requests_per_connection:</span><span class="nv"> </span><span class="s">1</span>

          <span class="s">'</span>
</code></pre></div></div>


    </div>
  
    <div data-navtab-content="Universal" class="navtab-content" role="tabpanel" id="Universal" tabindex="0">
      
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">MeshProxyPatch</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">max-requests-per-conn</span>
<span class="na">mesh</span><span class="pi">:</span> <span class="s">mesh-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">targetRef</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">Mesh</span>
  <span class="na">default</span><span class="pi">:</span>
    <span class="na">appendModifications</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">cluster</span><span class="pi">:</span>
        <span class="na">operation</span><span class="pi">:</span> <span class="s">Patch</span>
        <span class="na">match</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">demo-app_kuma-demo_svc_5000</span>
          <span class="na">origin</span><span class="pi">:</span> <span class="s">outbound</span>
        <span class="na">value</span><span class="pi">:</span> <span class="s1">'</span><span class="s">max_requests_per_connection:</span><span class="nv"> </span><span class="s">1</span>

          <span class="s">'</span>
</code></pre></div></div>


    </div>
  
  </div>
</div>

<p>This way, we allow only one in-flight request on a TCP connection. Consequently, the client will open more TCP connections, leading to fairer load balancing.
The downside is that we now have to establish and maintain more TCP connections. Keep this in mind as you adjust the value to suit your needs.</p>

<h2 id="all-policy-options">All policy options</h2>

<div id="markdown_html"></div>

<script defer src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js"></script>

<script defer src="https://brianwendt.github.io/json-schema-md-doc/lib/JSONSchemaMarkdown.js"></script>

<script type="text/javascript">
const data = {"description":"Spec is the specification of the Kuma MeshLoadBalancingStrategy resource.","properties":{"targetRef":{"description":"TargetRef is a reference to the resource the policy takes an effect on.\nThe resource could be either a real store object or virtual resource\ndefined inplace.","properties":{"kind":{"description":"Kind of the referenced resource","enum":["Mesh","MeshSubset","MeshGateway","MeshService","MeshExternalService","MeshServiceSubset","MeshHTTPRoute"],"type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"Labels are used to select group of MeshServices that match labels. Either Labels or\nName and Namespace can be used.","type":"object"},"mesh":{"description":"Mesh is reserved for future use to identify cross mesh resources.","type":"string"},"name":{"description":"Name of the referenced resource. Can only be used with kinds: `MeshService`,\n`MeshServiceSubset` and `MeshGatewayRoute`","type":"string"},"namespace":{"description":"Namespace specifies the namespace of target resource. If empty only resources in policy namespace\nwill be targeted.","type":"string"},"proxyTypes":{"description":"ProxyTypes specifies the data plane types that are subject to the policy. When not specified,\nall data plane types are targeted by the policy.","items":{"enum":["Sidecar","Gateway"],"type":"string"},"minItems":1,"type":"array"},"sectionName":{"description":"SectionName is used to target specific section of resource.\nFor example, you can target port from MeshService.ports[] by its name. Only traffic to this port will be affected.","type":"string"},"tags":{"additionalProperties":{"type":"string"},"description":"Tags used to select a subset of proxies by tags. Can only be used with kinds\n`MeshSubset` and `MeshServiceSubset`","type":"object"}},"type":"object"},"to":{"description":"To list makes a match between the consumed services and corresponding configurations","items":{"properties":{"default":{"description":"Default is a configuration specific to the group of destinations referenced in\n'targetRef'","properties":{"loadBalancer":{"description":"LoadBalancer allows to specify load balancing algorithm.","properties":{"leastRequest":{"description":"LeastRequest selects N random available hosts as specified in 'choiceCount' (2 by default)\nand picks the host which has the fewest active requests","properties":{"activeRequestBias":{"anyOf":[{"type":"integer"},{"type":"string"}],"description":"ActiveRequestBias refers to dynamic weights applied when hosts have varying load\nbalancing weights. A higher value here aggressively reduces the weight of endpoints\nthat are currently handling active requests. In essence, the higher the ActiveRequestBias\nvalue, the more forcefully it reduces the load balancing weight of endpoints that are\nactively serving requests.","x-kubernetes-int-or-string":true},"choiceCount":{"description":"ChoiceCount is the number of random healthy hosts from which the host with\nthe fewest active requests will be chosen. Defaults to 2 so that Envoy performs\ntwo-choice selection if the field is not set.","format":"int32","minimum":2,"type":"integer"}},"type":"object"},"maglev":{"description":"Maglev implements consistent hashing to upstream hosts. Maglev can be used as\na drop in replacement for the ring hash load balancer any place in which\nconsistent hashing is desired.","properties":{"hashPolicies":{"description":"HashPolicies specify a list of request/connection properties that are used to calculate a hash.\nThese hash policies are executed in the specified order. If a hash policy has the “terminal” attribute\nset to true, and there is already a hash generated, the hash is returned immediately,\nignoring the rest of the hash policy list.","items":{"properties":{"connection":{"properties":{"sourceIP":{"description":"Hash on source IP address.","type":"boolean"}},"type":"object"},"cookie":{"properties":{"name":{"description":"The name of the cookie that will be used to obtain the hash key.","minLength":1,"type":"string"},"path":{"description":"The name of the path for the cookie.","type":"string"},"ttl":{"description":"If specified, a cookie with the TTL will be generated if the cookie is not present.","type":"string"}},"required":["name"],"type":"object"},"filterState":{"properties":{"key":{"description":"The name of the Object in the per-request filterState, which is\nan Envoy::Hashable object. If there is no data associated with the key,\nor the stored object is not Envoy::Hashable, no hash will be produced.","minLength":1,"type":"string"}},"required":["key"],"type":"object"},"header":{"properties":{"name":{"description":"The name of the request header that will be used to obtain the hash key.","minLength":1,"type":"string"}},"required":["name"],"type":"object"},"queryParameter":{"properties":{"name":{"description":"The name of the URL query parameter that will be used to obtain the hash key.\nIf the parameter is not present, no hash will be produced. Query parameter names\nare case-sensitive.","minLength":1,"type":"string"}},"required":["name"],"type":"object"},"terminal":{"description":"Terminal is a flag that short-circuits the hash computing. This field provides\na ‘fallback’ style of configuration: “if a terminal policy doesn’t work, fallback\nto rest of the policy list”, it saves time when the terminal policy works.\nIf true, and there is already a hash computed, ignore rest of the list of hash polices.","type":"boolean"},"type":{"enum":["Header","Cookie","SourceIP","QueryParameter","FilterState"],"type":"string"}},"required":["type"],"type":"object"},"type":"array"},"tableSize":{"description":"The table size for Maglev hashing. Maglev aims for “minimal disruption”\nrather than an absolute guarantee. Minimal disruption means that when\nthe set of upstream hosts change, a connection will likely be sent\nto the same upstream as it was before. Increasing the table size reduces\nthe amount of disruption. The table size must be prime number limited to 5000011.\nIf it is not specified, the default is 65537.","format":"int32","maximum":5000011,"minimum":1,"type":"integer"}},"type":"object"},"random":{"description":"Random selects a random available host. The random load balancer generally\nperforms better than round-robin if no health checking policy is configured.\nRandom selection avoids bias towards the host in the set that comes after a failed host.","type":"object"},"ringHash":{"description":"RingHash  implements consistent hashing to upstream hosts. Each host is mapped\nonto a circle (the “ring”) by hashing its address; each request is then routed\nto a host by hashing some property of the request, and finding the nearest\ncorresponding host clockwise around the ring.","properties":{"hashFunction":{"description":"HashFunction is a function used to hash hosts onto the ketama ring.\nThe value defaults to XX_HASH. Available values – XX_HASH, MURMUR_HASH_2.","enum":["XXHash","MurmurHash2"],"type":"string"},"hashPolicies":{"description":"HashPolicies specify a list of request/connection properties that are used to calculate a hash.\nThese hash policies are executed in the specified order. If a hash policy has the “terminal” attribute\nset to true, and there is already a hash generated, the hash is returned immediately,\nignoring the rest of the hash policy list.","items":{"properties":{"connection":{"properties":{"sourceIP":{"description":"Hash on source IP address.","type":"boolean"}},"type":"object"},"cookie":{"properties":{"name":{"description":"The name of the cookie that will be used to obtain the hash key.","minLength":1,"type":"string"},"path":{"description":"The name of the path for the cookie.","type":"string"},"ttl":{"description":"If specified, a cookie with the TTL will be generated if the cookie is not present.","type":"string"}},"required":["name"],"type":"object"},"filterState":{"properties":{"key":{"description":"The name of the Object in the per-request filterState, which is\nan Envoy::Hashable object. If there is no data associated with the key,\nor the stored object is not Envoy::Hashable, no hash will be produced.","minLength":1,"type":"string"}},"required":["key"],"type":"object"},"header":{"properties":{"name":{"description":"The name of the request header that will be used to obtain the hash key.","minLength":1,"type":"string"}},"required":["name"],"type":"object"},"queryParameter":{"properties":{"name":{"description":"The name of the URL query parameter that will be used to obtain the hash key.\nIf the parameter is not present, no hash will be produced. Query parameter names\nare case-sensitive.","minLength":1,"type":"string"}},"required":["name"],"type":"object"},"terminal":{"description":"Terminal is a flag that short-circuits the hash computing. This field provides\na ‘fallback’ style of configuration: “if a terminal policy doesn’t work, fallback\nto rest of the policy list”, it saves time when the terminal policy works.\nIf true, and there is already a hash computed, ignore rest of the list of hash polices.","type":"boolean"},"type":{"enum":["Header","Cookie","SourceIP","QueryParameter","FilterState"],"type":"string"}},"required":["type"],"type":"object"},"type":"array"},"maxRingSize":{"description":"Maximum hash ring size. Defaults to 8M entries, and limited to 8M entries,\nbut can be lowered to further constrain resource use.","format":"int32","maximum":8000000,"minimum":1,"type":"integer"},"minRingSize":{"description":"Minimum hash ring size. The larger the ring is (that is,\nthe more hashes there are for each provided host) the better the request distribution\nwill reflect the desired weights. Defaults to 1024 entries, and limited to 8M entries.","format":"int32","maximum":8000000,"minimum":1,"type":"integer"}},"type":"object"},"roundRobin":{"description":"RoundRobin is a load balancing algorithm that distributes requests\nacross available upstream hosts in round-robin order.","type":"object"},"type":{"enum":["RoundRobin","LeastRequest","RingHash","Random","Maglev"],"type":"string"}},"required":["type"],"type":"object"},"localityAwareness":{"description":"LocalityAwareness contains configuration for locality aware load balancing.","properties":{"crossZone":{"description":"CrossZone defines locality aware load balancing priorities when dataplane proxies inside local zone\nare unavailable","properties":{"failover":{"description":"Failover defines list of load balancing rules in order of priority","items":{"properties":{"from":{"description":"From defines the list of zones to which the rule applies","properties":{"zones":{"items":{"type":"string"},"type":"array"}},"required":["zones"],"type":"object"},"to":{"description":"To defines to which zones the traffic should be load balanced","properties":{"type":{"description":"Type defines how target zones will be picked from available zones","enum":["None","Only","Any","AnyExcept"],"type":"string"},"zones":{"items":{"type":"string"},"type":"array"}},"required":["type"],"type":"object"}},"required":["to"],"type":"object"},"type":"array"},"failoverThreshold":{"description":"FailoverThreshold defines the percentage of live destination dataplane proxies below which load balancing to the\nnext priority starts.\nExample: If you configure failoverThreshold to 70, and you have deployed 10 destination dataplane proxies.\nLoad balancing to next priority will start when number of live destination dataplane proxies drops below 7.\nDefault 50","properties":{"percentage":{"anyOf":[{"type":"integer"},{"type":"string"}],"x-kubernetes-int-or-string":true}},"required":["percentage"],"type":"object"}},"type":"object"},"disabled":{"description":"Disabled allows to disable locality-aware load balancing.\nWhen disabled requests are distributed across all endpoints regardless of locality.","type":"boolean"},"localZone":{"description":"LocalZone defines locality aware load balancing priorities between dataplane proxies inside a zone","properties":{"affinityTags":{"description":"AffinityTags list of tags for local zone load balancing.","items":{"properties":{"key":{"description":"Key defines tag for which affinity is configured","type":"string"},"weight":{"description":"Weight of the tag used for load balancing. The bigger the weight the bigger the priority.\nPercentage of local traffic load balanced to tag is computed by dividing weight by sum of weights from all tags.\nFor example with two affinity tags first with weight 80 and second with weight 20,\nthen 80% of traffic will be redirected to the first tag, and 20% of traffic will be redirected to second one.\nSetting weights is not mandatory. When weights are not set control plane will compute default weight based on list order.\nDefault: If you do not specify weight we will adjust them so that 90% traffic goes to first tag, 9% to next, and 1% to third and so on.","format":"int32","type":"integer"}},"required":["key"],"type":"object"},"type":"array"}},"type":"object"}},"type":"object"}},"type":"object"},"targetRef":{"description":"TargetRef is a reference to the resource that represents a group of\ndestinations.","properties":{"kind":{"description":"Kind of the referenced resource","enum":["Mesh","MeshSubset","MeshGateway","MeshService","MeshExternalService","MeshServiceSubset","MeshHTTPRoute"],"type":"string"},"labels":{"additionalProperties":{"type":"string"},"description":"Labels are used to select group of MeshServices that match labels. Either Labels or\nName and Namespace can be used.","type":"object"},"mesh":{"description":"Mesh is reserved for future use to identify cross mesh resources.","type":"string"},"name":{"description":"Name of the referenced resource. Can only be used with kinds: `MeshService`,\n`MeshServiceSubset` and `MeshGatewayRoute`","type":"string"},"namespace":{"description":"Namespace specifies the namespace of target resource. If empty only resources in policy namespace\nwill be targeted.","type":"string"},"proxyTypes":{"description":"ProxyTypes specifies the data plane types that are subject to the policy. When not specified,\nall data plane types are targeted by the policy.","items":{"enum":["Sidecar","Gateway"],"type":"string"},"minItems":1,"type":"array"},"sectionName":{"description":"SectionName is used to target specific section of resource.\nFor example, you can target port from MeshService.ports[] by its name. Only traffic to this port will be affected.","type":"string"},"tags":{"additionalProperties":{"type":"string"},"description":"Tags used to select a subset of proxies by tags. Can only be used with kinds\n`MeshSubset` and `MeshServiceSubset`","type":"object"}},"type":"object"}},"required":["targetRef"],"type":"object"},"type":"array"}},"required":["targetRef"],"type":"object"};
document.addEventListener("DOMContentLoaded", function() {
  function removeNewlinesFromDescriptions(obj) {
    for (const key in obj) {
      if (typeof obj[key] === 'object') {
        // Recursively process nested objects
        removeNewlinesFromDescriptions(obj[key]);
      } else if (key === 'description' && typeof obj[key] === 'string') {
        // Replace newlines in description values
        obj[key] = obj[key].replace(/\n/g, '');
      }
    }
  }

  // create an instance of JSONSchemaMarkdown
  const Doccer = new JSONSchemaMarkdown();
  // don't include the path of the field in the output
  Doccer.writePath = function() {};
  // remove new lines in description
  removeNewlinesFromDescriptions(data)

  Doccer.load(data);
  Doccer.generate();

  const converter = new showdown.Converter();
  // use the converter to make html from the markdown
  document.getElementById("markdown_html").innerHTML = converter.makeHtml(Doccer.markdown);
});
</script>



          

        </div>
      </div>
    </div>
    
      <div id="scroll-to-top-button">
        <i class="fas fa-chevron-up"></i>
      </div>
      
        <div class="feedback-widget-container">
  <input id="feedback-widget-checkbox" type="checkbox">
  <label for="feedback-widget-checkbox">
    <img src="/assets/images/icons/feedback-widget.svg" alt="Feedback widget">
  </label>
  <div class="feedback-container">
    <div class="feedback-thankyou">
      Thank you for your feedback.
    </div>
    <div class="feedback-comment">
      <textarea id="feedback-comment-text" rows="3" placeholder="Please let us know what we can improve on this page..."></textarea>
      <div class="feedback-comment-buttons">
        <button id="feedback-comment-button-back">Back</button>
        <button id="feedback-comment-button-submit" class="button-primary">Submit</button>
      </div>
    </div>
    <div class="feedback-options">
      <div class="feedback-options-title">Was this page useful?</div>
      <div class="feedback-options-buttons">
        <i data-feedback-result="yes" class="feedback-options-button far fa-thumbs-up"></i>
        <i data-feedback-result="no" class="feedback-options-button far fa-thumbs-down"></i>
      </div>
    </div>
  </div>
</div>

      
    
  </div>

  <div id="image-modal" data-image-expand-disabled="">
  <div class="image-modal-backdrop"></div>
  <div class="image-container">
    <img src="" alt="">
    <i class="fa fa-times"></i>
  </div>
</div>




  <div class="modal closed" id="modal" role="dialog" aria-hidden="true" aria-labelledby="title" aria-describedby="description">
    <div class="konnect-cta-card">
      <div class="title">
      Too much on your plate?
      <a href="#" class="cta-card-close modal-close" id="modal-close">
          <img src="/assets/images/icons/documentation/close.svg" alt="close cta icon">
        </a>
      </div>
      <div class="description">More features, less infrastructure with Kong Konnect. 1M requests per month for free.</div>
      <a href="https://konghq.com/products/kong-konnect/register?utm_medium=referral&amp;utm_source=docs&amp;utm_campaign=gateway-konnect&amp;utm_campaign=right-nav-card&amp;utm_content=mesh" class="button" target="_blank" rel="noopener nofollow noreferrer ">
      Try it for Free
    </a>
    </div>
  </div>
  <div id="modal-open" class="modal-open"></div>
  <div class="modal-overlay closed" id="modal-overlay"></div>


    <footer class="marketing-footer--light-gray">
  <section>
    <ul class="newsletter">
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/logos/konglogo-light-theme-primary.svg" alt="Kong">
        </div>
        <div class="footer-title">Powering the API world</div>
        <p>
          Increase developer productivity, security, and performance at scale with the unified platform for API management, service mesh, and ingress controller.
        </p>
        <div class="footer-form-container">
          <form id="subscribe-form" method="POST" action="/assets/javascripts/subscribe.js">
            <input required id="subscribe-input" type="email" name="email" placeholder="Email" aria-required="true" aria-invalid="false">
            <input id="footer-form-button" type="submit" form="subscribe-form" value="Subscribe">
          </form>

          <div id="form-response"></div>
        </div>
      </li>

      <li class="footer-columns">
        <ul class="footer-columns-product-list">
          <li>
            <nav>
              <div class="footer-category">Products</div>
              <ul>
                <li>
                  <a href="https://konghq.com/products/kong-konnect" target="_blank" rel="noopener nofollow noreferrer ">Kong Konnect</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-enterprise" target="_blank" rel="noopener nofollow noreferrer ">Kong Gateway Enterprise</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-gateway" target="_blank" rel="noopener nofollow noreferrer ">Kong Gateway</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-mesh" target="_blank" rel="noopener nofollow noreferrer ">Kong Mesh</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-ingress-controller" target="_blank" rel="noopener nofollow noreferrer ">Kong Ingress Controller</a>
                </li>
                <li>
                  <a href="https://insomnia.rest/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Kong Insomnia</a>
                </li>
                <li>
                  <a href="https://konghq.com/product-updates" target="_blank" rel="noopener nofollow noreferrer ">Product Updates</a>
                </li>
                <li>
                  <a href="https://konghq.com/contact-sales" target="_blank" rel="noopener nofollow noreferrer ">Get Started</a>
                </li>
              </ul>
            </nav>
          </li>
          <li>
            <nav>
              <div class="footer-category">Documentation</div>
              <ul>
                <li>
                  <a href="/konnect/">Kong Konnect Docs</a>
                </li>
                <li>
                  <a href="/gateway/latest/">Kong Gateway Docs</a>
                </li>
                <li>
                  <a href="/gateway/latest/kong-enterprise/">Kong Gateway Enterprise Docs</a>
                </li>
                <li>
                  <a href="/mesh/latest/">Kong Mesh Docs</a>
                </li>
                <li>
                  <a href="https://docs.insomnia.rest/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Kong Insomnia Docs</a>
                </li>
                <li>
                  <a href="/hub/">Kong Konnect Plugin Hub</a>
                </li>
              </ul>
            </nav>
          </li>
          <li>
            <nav>
              <div class="footer-category">Open Source</div>
              <ul>
                <li>
                  <a href="https://konghq.com/install/#kong-community" target="_blank" rel="noopener nofollow noreferrer ">Kong Gateway</a>
                </li>
                <li>
                  <a href="https://kuma.io/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Kuma</a>
                </li>
                <li>
                  <a href="https://insomnia.rest/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Insomnia</a>
                </li>
                <li>
                  <a href="https://konghq.com/community" target="_blank" rel="noopener nofollow noreferrer ">Kong Community</a>
                </li>
              </ul>
            </nav>
          </li>
          <li>
            <nav>
              <div class="footer-category">Company</div>
              <ul>
                <li>
                  <a href="https://konghq.com/company/about-us" target="_blank" rel="noopener nofollow noreferrer ">About Kong</a>
                </li>
                <li>
                  <a href="https://konghq.com/customers" target="_blank" rel="noopener nofollow noreferrer ">Customers</a>
                </li>
                <li>
                  <a href="https://konghq.com/company/careers" target="_blank" rel="noopener nofollow noreferrer ">Careers</a>
                </li>
                <li>
                  <a href="https://konghq.com/press-room" target="_blank" rel="noopener nofollow noreferrer ">Press</a>
                </li>
                <li>
                  <a href="https://konghq.com/events" target="_blank" rel="noopener nofollow noreferrer ">Events</a>
                </li>
                <li>
                  <a href="https://konghq.com/company/contact-us" target="_blank" rel="noopener nofollow noreferrer ">Contact</a>
                </li>
              </ul>
            </nav>
          </li>
        </ul>
      </li>

    </ul>
  </section>

  <section class="legal">
    <div class="container d-flex">
      <div class="social">
        <div class="social-link">
          <a href="https://www.facebook.com/konghq/" title="Facebook" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="Facebook" class="fa fa-facebook-official" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://twitter.com/thekonginc" title="Twitter" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="Twitter" class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://www.meetup.com/topics/kong/all/" title="Meetup" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="Meetup" class="fa fa-meetup" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://linkedin.com/company/278819" title="LinkedIn" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="GitHub" class="fa fa-linkedin" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://github.com/kong/kong" target="_blank" class="btn-gh" title="GitHub" rel="noopener nofollow noreferrer ">
            <i class="fa fa-github" aria-hidden="true" aria-label="GitHub"></i>
          </a>
        </div>
      </div>
      <ul>
        <li>
          <span class="mashape-footer-content">
            <a href="https://konghq.com/legal/terms-of-use" target="_blank" rel="noopener nofollow noreferrer ">Terms</a><b>•</b>
            <a href="https://konghq.com/legal/privacy-policy" target="_blank" rel="noopener nofollow noreferrer ">Privacy</a><b>•</b>
            <a href="https://konghq.com/compliance" target="_blank" rel="noopener nofollow noreferrer ">Trust and Compliance</a>
          </span>
        </li>
      </ul>
      <div>
        <span>© Kong Inc. 2024  </span>
      </div>
    </div>
  </section>
</footer>
 <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    anchor.title = `${id} Permalink`;
    return anchor;
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var className =
        ".show-anchor-links h1, .show-anchor-links h2, .show-anchor-links h3, " +
        ".show-anchor-links h4, .show-anchor-links h5, .show-anchor-links h6";
      var headers = document.querySelectorAll(className);

      for (var i = 0; i < headers.length; i++) {
        var header = headers[i];
        if (typeof header.id !== "undefined" && header.id !== "") {
          header.prepend(anchorForId(header.id));
        }
      }
    }
  };
</script>


    
      <script>
        (function stp(){
          if (typeof analytics == "undefined"){
            return setTimeout(stp, 30);
          }
          analytics.page();
        })();
      </script>
    

    <div id="fb-root"></div>
    <script id="github-bjs" src="https://buttons.github.io/buttons.js" async defer></script>

    <script type="text/javascript">
      var _vwo_code = (function() {
        var account_id = 125292,
          settings_tolerance = 2000,
          library_tolerance = 2500,
          use_existing_jquery = true,
          // DO NOT EDIT BELOW THIS LINE
          f = false,
          d = document;
        return {
          use_existing_jquery: function() {
            return use_existing_jquery;
          },
          library_tolerance: function() {
            return library_tolerance;
          },
          finish: function() {
            if (!f) {
              f = true;
              var a = d.getElementById('_vis_opt_path_hides');
              if (a) a.parentNode.removeChild(a);
            }
          },
          finished: function() {
            return f;
          },
          load: function(a) {
            var b = d.createElement('script');
            b.src = a;
            b.type = 'text/javascript';
            b.innerText;
            b.onerror = function() {
              _vwo_code.finish();
            };
            d.getElementsByTagName('head')[0].appendChild(b);
          },
          init: function() {
            settings_timer = setTimeout(
              '_vwo_code.finish()',
              settings_tolerance
            );
            this.load(
              '//dev.visualwebsiteoptimizer.com/j.php?a=' +
                account_id +
                '&u=' +
                encodeURIComponent(d.URL) +
                '&r=' +
                Math.random()
            );
            var a = d.createElement('style'),
              b = '',
              h = d.getElementsByTagName('head')[0];
            a.setAttribute('id', '_vis_opt_path_hides');
            a.setAttribute('type', 'text/css');
            if (a.styleSheet) a.styleSheet.cssText = b;
            else a.appendChild(d.createTextNode(b));
            h.appendChild(a);
            return settings_timer;
          }
        };
      })();
      _vwo_settings_timer = _vwo_code.init();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>

    
      <script type="text/javascript">
        docsearch({
          appId: '05Y6TLHNFZ',
          apiKey: '80483bfe28d9fd036a11a6f6a06454f8',
          indexName: 'konghq',
          container: '#getkong-algolia-search-input',
          disableUserPersonalization: true,
          placeholder: 'Search the docs...',
          // Override selected event to allow for local environment navigation
          transformItems(items) {
            return items.map((item) => {
              var modifiedUrl = window.location.protocol + '//' + window.location.host + item.url.split('docs.konghq.com')[1];
              return { ...item, url: modifiedUrl };
            });
          },
          translations: {
            button: {
              buttonText: 'Search the docs..',
              buttonAriaLabel: 'Search the docs...'
            }
          },
          resultsFooterComponent({ state }) {
            var facetParameters = {};
            
              facetParameters = {"version[0]":"2.8.x","product[0]":"Kong Mesh"};
            

            var queryParams = new URLSearchParams(facetParameters);
            queryParams.set('query', state.query);

            return {
              // The HTML `tag`
              type: 'a',
              ref: undefined,
              constructor: undefined,
              key: state.query,
              // Its props
              props: {
                href: `/search/?${queryParams.toString()}`,
                target: '_blank',
                // Raw text rendered in the HTML element
                children: 'See more >'
              },
              __v: null,
            };
          },
          
           searchParameters: {
              optionalFilters: ['product:Kong Mesh<score=1>'],
              facetFilters: [ 'version:2.8.x']
            }
            
          });
      </script>
    
  </div>
</body>

  

</html>

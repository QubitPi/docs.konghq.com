<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">

  

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
    <!-- OneTrust Cookies Consent Notice start for konghq.com -->
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="2c4de954-6bec-4e93-8086-64cb113f151a">
    </script>
    <script type="text/javascript">
    function OptanonWrapper() { }
    </script>
    <!-- OneTrust Cookies Consent Notice end for konghq.com -->

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NL48VKT');</script>
    <!-- End Google Tag Manager -->
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Mutual TLS Client Authentication - Plugin | Kong Docs</title>
  <meta name="description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices.">
  <meta name="author" content="KongHQ">
  <meta property="og:title" content="Mutual TLS Client Authentication - Plugin | Kong Docs">
  <meta property="og:site_name" content="Kong Docs">
  <!-- use share link for facebook -->
  <meta property="og:url" content="https://docs.konghq.com">
  <meta property="og:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices.">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="en_US">
  <meta property="og:image" content="https://docs.konghq.com/assets/images/share.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@thekonginc">
  <meta name="twitter:creator" content="@thekonginc">
  <meta name="twitter:url" content="https://docs.konghq.com">
  <meta name="twitter:description" content="Documentation for Kong, the Cloud Connectivity Company for APIs and Microservices.">
  <meta name="twitter:image" content="https://docs.konghq.com/assets/images/share.png">
  <meta property="fb:admins" content="227304446">
  <meta property="fb:admins" content="576641408">
  <meta name="google-site-verification" content="CrU3zp02dNKTe8NSAipL4NCPkrIjDXG8fViTZ-MIzP4">

  

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "name": "KongHQ",
      "url": "https://docs.konghq.com",
      "logo": "https://docs.konghq.com/assets/images/logo.png",
      "sameAs": [
        "https://www.facebook.com/konginc",
        "https://twitter.com/thekonginc",
        "https://plus.google.com/+mashape"
      ]
    }
  </script>

  <!-- Preload assets -->
  <link rel="dns-prefetch" href="https://cloud.typography.com">
  <link rel="dns-prefetch" href="https://dev.visualwebsiteoptimizer.com">
  <link rel="dns-prefetch" href="https://cdn.segment.com">

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">

  
    <link rel="canonical" href="https://docs.konghq.com/hub/kong-inc/openid-connect/how-to/client-authentication/mtls/">
  

  
    <meta name="robots" content="follow,index">
  

  <!-- FontAwesome icon font -->
  <script src="https://kit.fontawesome.com/1332a92967.js" crossorigin="anonymous">
  </script>

  
  <script src="/vite/assets/application-DqmI9sc2.js" crossorigin="anonymous" type="module"></script>
<link href="/vite/assets/_commonjsHelpers-Cpj98o6Y.js" rel="modulepreload" as="script" crossorigin="anonymous">


  

  

  <link rel="stylesheet" href="/vite/assets/application-CrIf7Il_.css" media="screen">

  
</head>


  <body id="" data-spy="scroll" data-target="#scroll-sidebar" data-offset="350">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NL48VKT" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header class="navbar-v2 closed">
  <a class="skip-main" href="#main">Skip to content</a>
  <!-- uncomment the promo-banner div when adding a new promo banner-->
  <!--also uncomment the promo banner sections in app/assets/stylesheets/header.less and application.js-->
  <!-- <div id="promo-banner">
    <div class="container">
      <div class="closebanner"></div> <strong>2024 API Summit Hackathon: Experiment with API Innovation & AI. Submit by Sept 11 &nbsp;&mdash;<a href="https://konghq.com/conferences/kong-summit/hackathon?utm_medium=website&utm_source=docs-konghq-com&utm_campaign=docs-banner">Enter Now &rarr;</a> </strong>
    </div>
  </div> -->
  <div class="navbar-content">
    <a href="https://konghq.com" class="navbar-brand col col-xl-auto" target="_blank" rel="noopener noreferrer">
      <img src="/assets/images/logos/konglogo-dark-theme.svg" alt="Kong Logo" id="kong-logo">
    </a>
    <span class="logo-divider">|</span>
    <a href="/" class="navbar-brand col col-xl-auto">
      <img src="/assets/images/logos/docslogo-dark-theme.svg" alt="Kong Docs Logo" id="kong-docs-logo">
    </a>

    <div class="separator mobile"></div>
      <div class="search-input-wrapper" id="getkong-algolia-search-input">
    </div>

    <div class="search-results-wrapper"></div>

    <div class="navbar-items" role="navigation" aria-label="Main menu">
      <ul class="navbar-items" role="menubar">
        <li id="top-module-list" aria-haspopup="true" role="menuitem" aria-expanded="false" class="navbar-item main-menu-item with-submenu  active">
          <span tabindex="0" id="docs-link" class="main-menu-item-title">Docs</span>
          <span class="caret"></span>
          <ul class="navbar-item-submenu" role="menu">
            <div class="submenu-section">
              <li role="menuitem" class="docs-dropdown-li">
                <a href="/api/" class="docs-dropdown-li__link" tabindex="-1">
                  <div class="docs-dropdown-li__card">
                    <span class="heading">Explore the API Specs</span>
                    <div class="docs-dropdown-li__card-link">
                      <img src="/assets/images/landing-page/view-all-api-specs.png" alt="View all API Specs">
                      <span class="docs-dropdown-li__card-image">
                        View all API Specs
                        <img src="/assets/images/landing-page/arrow-right.svg" alt="View all API Specs arrow image">
                      </span>
                    </div>
                  </div>
                </a>
              </li>

              <li role="menuitem" class="docs-dropdown-li" tabindex="-1">
                <div class="docs-dropdown-li__section">
                  <div class="docs-dropdown-li__section-title">
                    <span class="heading">Documentation</span>
                  </div>

                  <div class="docs-dropdown-li__section-items">
                    <a class="item item-all" href="/api/" tabindex="-1">
                      <div class="item__description">
                        <div class="item__description-title">API Specs</div>
                      </div>
                    </a>
                    
                      <a class="item" href="/gateway/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Gateway</div>
                          <div class="item__description-desc">Lightweight, fast, and flexible cloud-native API gateway</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/konnect/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Konnect</div>
                          <div class="item__description-desc">Single platform for SaaS end-to-end connectivity</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/gateway/latest/ai-gateway/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong AI Gateway</div>
                          <div class="item__description-desc">Multi-LLM AI Gateway for GenAI infrastructure</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/mesh/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Mesh</div>
                          <div class="item__description-desc">Enterprise service mesh based on Kuma and Envoy</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/deck/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">decK</div>
                          <div class="item__description-desc">Helps manage Kong’s configuration in a declarative fashion</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/kubernetes-ingress-controller/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Ingress Controller</div>
                          <div class="item__description-desc">Works inside a Kubernetes cluster and configures Kong to proxy traffic</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/gateway-operator/latest/" tabindex="-1">
                        
                        <div class="item__description">
                          <div class="item__description-title">Kong Gateway Operator</div>
                          <div class="item__description-desc">Manage your Kong deployments on Kubernetes using YAML Manifests</div>
                        </div>
                      </a>
                    
                      <a class="item" href="https://docs.insomnia.rest/" tabindex="-1" target="_blank" rel="noopener nofollow noreferrer ">
                        
                        <div class="item__description">
                          <div class="item__description-title">Insomnia</div>
                          <div class="item__description-desc">Collaborative API development platform</div>
                        </div>
                      </a>
                    
                  </div>
                </div>
              </li>

            </div>
          </ul>
        </li>

        <li role="menuitem" aria-haspopup="true" aria-expanded="false" class="navbar-item main-menu-item with-submenu navbar-item-hub">
          <span id="plugin-link" class="main-menu-item-title" tabindex="0">Plugin Hub</span>
          <span class="caret"></span>
          <ul class="navbar-item-submenu" role="menu">
            <div class="submenu-section">
              <li role="menuitem" class="docs-dropdown-li">
                <a href="/hub/" class="docs-dropdown-li__link" tabindex="-1">
                  <div class="docs-dropdown-li__card">
                    <span class="heading">Explore the Plugin Hub</span>
                    <div class="docs-dropdown-li__card-link">
                      <img src="/assets/images/landing-page/view-all-plugins.svg" alt="View all plugins">
                      <span class="docs-dropdown-li__card-image">
                        View all plugins
                        <img src="/assets/images/landing-page/arrow-right.svg" alt="View all plugins arrow image">
                      </span>
                    </div>
                  </div>
                </a>
              </li>

              <li role="menuitem" class="docs-dropdown-li">
                <div class="docs-dropdown-li__section">
                  <div class="docs-dropdown-li__section-title">
                    <span class="heading">Functionality</span>
                    <a href="/hub/" class="view-all" tabindex="-1">
                      View all
                      <img src="/assets/images/landing-page/arrow-right.svg" alt="View all arrow image">
                    </a>
                  </div>

                  <div class="docs-dropdown-li__section-items">
                    <a class="item item-all" href="/hub/" tabindex="-1">
                      <div class="item__description">
                        <div class="item__description-title">View all plugins</div>
                      </div>
                    </a>

                    
                      <a class="item" href="/hub/?category=ai" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/ai.svg" alt="AI's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">AI</div>
                          <div class="item__description-desc">Govern, secure, and control AI traffic with multi-LLM AI Gateway plugins</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=authentication" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/lock_person.svg" alt="Authentication's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Authentication</div>
                          <div class="item__description-desc">Protect your services with an authentication layer</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=security" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/shield.svg" alt="Security's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Security</div>
                          <div class="item__description-desc">Protect your services with additional security layer</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=traffic-control" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/route.svg" alt="Traffic Control's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Traffic Control</div>
                          <div class="item__description-desc">Manage, throttle and restrict inbound and outbound API traffic</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=serverless" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/serverless.svg" alt="Serverless's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Serverless</div>
                          <div class="item__description-desc">Invoke serverless functions in combination with other plugins</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=analytics-monitoring" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/bar_chart.svg" alt="Analytics &amp; Monitoring's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Analytics &amp; Monitoring</div>
                          <div class="item__description-desc">Visualize, inspect and monitor APIs and microservices traffic</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=transformations" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/swap_horiz.svg" alt="Transformations's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Transformations</div>
                          <div class="item__description-desc">Transform request and responses on the fly on Kong</div>
                        </div>
                      </a>
                    
                      <a class="item" href="/hub/?category=logging" tabindex="-1">
                        <div>
                          <img src="/assets/images/nav/hub/list_alt.svg" alt="Logging's icon">
                        </div>
                        <div class="item__description">
                          <div class="item__description-title">Logging</div>
                          <div class="item__description-desc">Log request and response data using the best transport for your infrastructure</div>
                        </div>
                      </a>
                    

                  </div>
                </div>
              </li>
            </div>
          </ul>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://support.konghq.com/" class="navbar-item" target="_blank" rel="noopener nofollow noreferrer ">Support</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://konghq.com/community/" class="navbar-item" target="_blank" rel="noopener noreferrer">Community</a>
        </li>
        <li role="menuitem" class="main-menu-item">
          <a href="https://education.konghq.com" class="navbar-item" target="_blank" rel="noopener nofollow noreferrer ">Kong Academy</a>
        </li>
      </ul>
      <a id="top-cta" href="https://konghq.com/contact-sales?utm_source=docs.konghq.com" class="navbar-button" target="_blank" rel="noopener nofollow noreferrer ">
        Get a Demo
      </a>
      <a id="konnect-cta" href="https://konghq.com/products/kong-konnect/register?utm_medium=referral&amp;utm_source=docs&amp;utm_campaign=gateway-konnect&amp;utm_content=top-nav" class="navbar-button" target="_blank" rel="noopener nofollow noreferrer ">
        Start Free Trial
      </a>
    </div>
    <div id="navbar-menu-toggle-button" class="small-screen-button" aria-label="Toggle navigation">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
</header>


    

<!-- BEGIN PAGE OUTPUT -->
<div class="search-selector">Plugin Hub</div>

<div class="page v2 hub" data-url="/hub/kong-inc/openid-connect/how-to/client-authentication/mtls/">
  <div class="page--header-background"></div>
  <div class="container">
    


<header class="page-header">
  <div class="page-header--nav">
    <i class="sidebar-toggle"></i>

    
      <ul class="breadcrumbs">
        <li class="breadcrumb-item">
          <a href="/hub/">
            <img src="/assets/images/icons/hub-layout/icn-breadcrumbs.svg" alt="Plugin Hub icon">
          </a>
        </li>
        
          <li class="breadcrumb-item">
            
              <a href="/hub/?category=authentication">Authentication</a>
            
          </li>
        
          <li class="breadcrumb-item">
            
              <a href="/hub/kong-inc/openid-connect/">OpenID Connect</a>
            
          </li>
        
          <li class="breadcrumb-item">
            
              How to
            
          </li>
        
          <li class="breadcrumb-item active">
            
              <a href="/hub/kong-inc/openid-connect/how-to/client-authentication/mtls/">Mutual TLS Client Authentication</a>
            
          </li>
        
      </ul>
    

    <div class="github-links">
  <div class="github-links--edit">
    
      <a href="https://github.com/Kong/docs.konghq.com/edit/main/app/_hub/kong-inc/openid-connect/how-to/client-authentication/_mtls.md" target="_blank" rel="noopener nofollow noreferrer ">
        <img src="/assets/images/icons/third-party/logo-github-white.svg" alt="github-edit-page">Edit this page
      </a>
    
  </div>
  <div class="github-links--issues">
    <a href="https://github.com/Kong/docs.konghq.com/issues" target="_blank" rel="noopener nofollow noreferrer ">
      <img src="/assets/images/icons/documentation/icn-monitoring-white.svg" alt="report-issue">Report an issue</a>
  </div>
</div>


  </div>
  <div class="page-header--info">
    <div class="page-header--info-icon">
      
      <img src="/assets/images/icons/hub/kong-inc_openid-connect.png" alt="header icon">
      
    </div>
    <div class="page-header--info-meta">
      <div class="meta--title">
        <h1 id="main" tabindex="-1">Mutual TLS Client Authentication</h1>

        
          <div>
            <div class="versions-dropdown dropdown">
              <button class="dropdown-button" id="version-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                
                Gateway
                

                Version 3.8.x <em>(latest)</em>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" id="version-list" role="menu" aria-labelledby="version-dropdown">
                
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/unreleased/how-to/client-authentication/mtls/">
                    unreleased
                  </a>
                </li>
                
                <li class="active">
                  <a href="/hub/kong-inc/openid-connect/how-to/client-authentication/mtls/">
                    3.8.x <em>(latest)</em>
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.7.x/how-to/client-authentication/mtls/">
                    3.7.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.6.x/how-to/client-authentication/mtls/">
                    3.6.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.5.x/">
                    3.5.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.4.x/">
                    3.4.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.3.x/">
                    3.3.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.2.x/">
                    3.2.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.1.x/">
                    3.1.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/3.0.x/">
                    3.0.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/2.8.x/">
                    2.8.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/2.7.x/">
                    2.7.x
                  </a>
                </li>
                
                <li class="">
                  <a href="/hub/kong-inc/openid-connect/2.6.x/">
                    2.6.x
                  </a>
                </li>
                
              </ul>
            </div>
          </div>
        
      </div>
      <div class="meta--content">
        <div class="meta--content-title"><span>By Kong Inc.</span></div>
        <div class="meta--content-badges">
          
  <a href="https://konghq.com/pricing" target="_blank" class="badge konnect" aria-label="available in Konnect" rel="noopener nofollow noreferrer "> </a>


  <a href="https://konghq.com/pricing" target="_blank" class="badge enterprise" aria-label="available with Kong Gateway Enterprise subscription" rel="noopener nofollow noreferrer "> </a>





        </div>
      </div>
    </div>
  </div>
</header>


    

    <aside class="docs-sidebar">
  <i class="fa fa-times close-sidebar"></i>

  <ul class="sidebar-container" role="tree" aria-label="Plugin's Documentation">
    <li class="sidebar-item plugin-hub" role="none">
      <span role="treeitem" class="sidebar-label">
        <a class="sidebar-link" tabindex="-1" href="/hub/">
          
  <img src="/assets/images/icons/hub-layout/icn-breadcrumbs.svg" alt="">


Plugin Hub

        </a>
      </span>
    </li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-1-introduction-subtree">
    
      
  <img src="/assets/images/icons/hub-layout/icn-overview.svg" alt="">


Introduction

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Introduction subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-1-introduction-subtree" role="group" aria-label="Introduction">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/">
        

Overview

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/primary-config-params/">
        

Important config parameters

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/support/">
        

Supported credentials, grants, and tested IdPs

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/configuration/">
        
  <img src="/assets/images/icons/hub-layout/icn-configuration.svg" alt="">


Configuration reference

      </a>
    

    
  </span>

  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-using-the-plugin-subtree">
    
      
  <img src="/assets/images/icons/hub-layout/icn-how-to.svg" alt="">


Using the plugin

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Using the plugin subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-using-the-plugin-subtree" role="group" aria-label="Using the plugin">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/basic-example/">
        

Basic config examples

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-2-authentication-subtree">
    
      

Authentication

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Authentication subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-2-authentication-subtree" role="group" aria-label="Authentication">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/authorization-code-flow/">
        

Authorization code flow

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/client-credentials/">
        

Client credentials grant

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/introspection/">
        

Introspection

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/jwt-access-token/">
        

JWT access token

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/kong-oauth-token/">
        

Kong OAuth token

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/password-grant/">
        

Password grant

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/refresh-token/">
        

Refresh token grant

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/session/">
        

Session

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authentication/user-info/">
        

User info

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-3-authorization-subtree">
    
      

Authorization

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Authorization subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-3-authorization-subtree" role="group" aria-label="Authorization">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authorization/acl/">
        

ACL

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authorization/claims/">
        

Claims

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/authorization/consumer/">
        

Consumer

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-4-client-authentication-subtree">
    
      

Client Authentication

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Client Authentication subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-4-client-authentication-subtree" role="group" aria-label="Client Authentication">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/client-authentication/mtls/">
        

Mutual TLS Client Authentication

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label" aria-expanded="false" aria-owns="id-3-5-third-party-subtree">
    
      

Third Party

    

    
      <button class="sidebar-tree-toggle" aria-label="toggle Third Party subtree" tabindex="-1">
        <i class="fa fa-chevron-down"></i>
      </button>
    
  </span>

  
    <ul class="items" id="id-3-5-third-party-subtree" role="group" aria-label="Third Party">
      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/third-party/auth0/">
        

OpenID Connect with Auth0

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/third-party/azure-ad/">
        

OpenID Connect with Azure AD

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/third-party/cognito/">
        

OpenID Connect with Amazon Cognito

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/third-party/curity/">
        

OpenID Connect with Curity

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/third-party/google/">
        

OpenID Connect with Google

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/third-party/okta/">
        

OpenID Connect with Okta

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/cert-bound-access-tokens/">
        

Certificate-Bound Access Tokens

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/debugging/">
        

Debugging

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/demonstrating-proof-of-possession/">
        

Demonstrating Proof-of-Possession

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/fapi/">
        

Financial-Grade API (FAPI)

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/headers/">
        

Headers

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/logout/">
        

Logout

      </a>
    

    
  </span>

  
</li>

      
        
        <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/how-to/records/">
        

Records reference

      </a>
    

    
  </span>

  
</li>

      
    </ul>
  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/api/">
        
  <img src="/assets/images/icons/hub-layout/icn-reference.svg" alt="">


OpenID Connect API

      </a>
    

    
  </span>

  
</li>

    
      <li class="sidebar-item" role="none">
  <span role="treeitem" class="sidebar-label">
    
      <a class="sidebar-link" tabindex="-1" href="/hub/kong-inc/openid-connect/changelog/">
        
  <img src="/assets/images/icons/hub-layout/icn-changelog.svg" alt="">


Changelog

      </a>
    

    
  </span>

  
</li>

    
    
      <li>
        <a id="konnect-cta" href="https://konghq.com/products/kong-konnect/register?utm_medium=referral&amp;utm_source=docs&amp;utm_campaign=gateway-konnect&amp;utm_content=openid-connect" class="sidebar-button" target="_blank" rel="noopener nofollow noreferrer ">
          Try it in Konnect
        </a>
      </li>
    
  </ul>

</aside>


    <aside class="docs-toc" id="plugin-toc">
  <i class="fa fa-times close-sidebar"></i>
  <i class="fa fa-chevron-right collapse-toc"></i>
  <i class="far fa-list-alt expand-toc"></i>

  
    <div class="docs-toc-title">
<img src="/assets/images/icons/hub-layout/icn-on-this-page.svg" alt="On this page"><a href="#">On this page</a>
</div>
<ul>
  <li><a href="#mutual-tls-client-authentication" class="active scroll-to">Mutual TLS client authentication</a></li>
  <li>
<a href="#requirements-for-an-mtls-client-auth-configuration" class="scroll-to">Requirements for an mTLS client auth configuration</a>
    <ul>
      <li><a href="#auth-server-configuration" class="scroll-to">Auth server configuration</a></li>
      <li><a href="#kong-configuration" class="scroll-to">Kong configuration</a></li>
    </ul>
  </li>
  <li>
<a href="#demo" class="scroll-to">Demo</a>
    <ul>
      <li><a href="#prerequisites" class="scroll-to">Prerequisites</a></li>
      <li><a href="#set-up-mtls-for-the-oidc-plugin" class="scroll-to">Set up mTLS for the OIDC plugin</a></li>
      <li><a href="#test-mtls-client-auth" class="scroll-to">Test mTLS client auth</a></li>
    </ul>
  </li>
</ul>

  

  
</aside>


    <div class="page-content-container v2" id="documentation">
      <div class="page-content">
        <div class="content show-anchor-links">
          

          
          
      
        
      

      <h2 id="mutual-tls-client-authentication">Mutual TLS client authentication</h2>

<p>The OpenID Connect plugin supports mutual TLS (mTLS) client authentication with the IdP. 
When mTLS authentication is enabled, Kong establishes mTLS connections with the IdP using the configured client certificate.</p>

<p>You can use mTLS client authentication with the following IdP endpoints and corresponding flows:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">token</code>
    <ul>
      <li><a href="/hub/kong-inc/openid-connect/how-to/authentication/authorization-code-flow/">Authorization Code Flow</a></li>
      <li><a href="/hub/kong-inc/openid-connect/how-to/authentication/password-grant/">Password Grant</a></li>
      <li><a href="/hub/kong-inc/openid-connect/how-to/authentication/refresh-token/">Refresh Token Grant</a></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">introspection</code>
    <ul>
      <li><a href="/hub/kong-inc/openid-connect/how-to/authentication/introspection/">Introspection Authentication flow</a></li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">revocation</code>
    <ul>
      <li><a href="/hub/kong-inc/openid-connect/how-to/authentication/session/">Session Authentication</a></li>
    </ul>
  </li>
</ul>

<p>For all these endpoints and for the flows supported, the plugin uses mTLS client authentication as the authentication method when communicating with the IdP, for example, to fetch the token from the token endpoint.</p>

<h2 id="requirements-for-an-mtls-client-auth-configuration">Requirements for an mTLS client auth configuration</h2>

<h3 id="auth-server-configuration">Auth server configuration</h3>

<p>The feature requires the IdP to be enabled to use mTLS and X.509 client certificate authentication. For configuring this in Keycloak, refer to the <a href="#prerequisites">Keycloak configuration</a> section below. For different auth servers, refer to their documentation to configure this functionality.</p>

<h3 id="kong-configuration">Kong configuration</h3>

<ul>
  <li>Set the client authentication methods. Refer to the configuration reference sections:
    <ul>
      <li><a href="/hub/kong-inc/openid-connect/configuration/#configclient_auth"><code class="language-plaintext highlighter-rouge">client_auth</code></a></li>
      <li><a href="/hub/kong-inc/openid-connect/configuration/#configtoken_endpoint_auth_method"><code class="language-plaintext highlighter-rouge">token_endpoint_auth_method</code></a></li>
      <li><a href="/hub/kong-inc/openid-connect/configuration/#configintrospection_endpoint_auth_method"><code class="language-plaintext highlighter-rouge">introspection_endpoint_auth_method</code></a></li>
      <li><a href="/hub/kong-inc/openid-connect/configuration/#configrevocation_endpoint_auth_method"><code class="language-plaintext highlighter-rouge">revocation_endpoint_auth_method</code></a></li>
    </ul>
  </li>
  <li>Configure the client certificate ID as a value for the <code class="language-plaintext highlighter-rouge">tls_client_auth_cert_id</code> field as described in the <a href="/hub/kong-inc/openid-connect/configuration/#config-tls_client_auth_cert_id">configuration reference</a>.</li>
</ul>

<h4 id="certificates">Certificates</h4>

<p>For mTLS connections, create a certificate and key pair for Kong Gateway to use when connecting to the IdP:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http <span class="nt">-f</span> post :8001/certificates cert@crt.pem key@key.pem
</code></pre></div></div>

<h4 id="ssl-verify">SSL verify</h4>

<p>The configuration option <a href="/hub/kong-inc/openid-connect/configuration/#configtls_client_auth_ssl_verify"><code class="language-plaintext highlighter-rouge">tls_client_auth_ssl_verify</code></a> controls whether the server (IdP) certificate is verified.</p>

<p>When set to <code class="language-plaintext highlighter-rouge">true</code> (the default value), ensure <a href="/gateway/latest/reference/configuration/#lua_ssl_trusted_certificate">trusted certificate</a> and <a href="/gateway/latest/reference/configuration/#lua_ssl_verify_depth">verify depth</a> are appropriately configured so that the IdP’s server certificate is trusted by Kong and the handshake can be performed successfully.</p>

<h2 id="demo">Demo</h2>
<h3 id="prerequisites">Prerequisites</h3>

<p>Follow these prerequisites to set up a demo Keycloak app and a Kong service and route for testing mTLS client auth.</p>

<p>In most cases, the OpenID Connect plugin relies on a third party identity provider (IdP).
The examples in this guide use Keycloak as a sample IdP.</p>

<p>Expand the following sections to configure Keycloak and Kong Gateway.</p>

<details><summary>Configure Keycloak</summary>

<p>All the <code class="language-plaintext highlighter-rouge">*.test</code> domains in the following examples point to the <code class="language-plaintext highlighter-rouge">localhost</code> (<code class="language-plaintext highlighter-rouge">127.0.0.1</code> and/or <code class="language-plaintext highlighter-rouge">::1</code>).</p>

<p>We use <a href="http://www.keycloak.org/" target="_blank" rel="noopener nofollow noreferrer ">Keycloak</a> as the identity provider in the following examples,
but the steps will be similar in other standard identity providers. If you encounter
difficulties during this phase, refer to the <a href="https://www.keycloak.org/documentation" target="_blank" rel="noopener nofollow noreferrer ">Keycloak documentation</a>.</p>

<ol>
  <li>Create a confidential client <code class="language-plaintext highlighter-rouge">kong</code> with <code class="language-plaintext highlighter-rouge">private_key_jwt</code> authentication and configure
Keycloak to download the public keys from [the OpenID Connect Plugin JWKS endpoint][json-web-key-set]:
<br><br>
<img src="/assets/images/products/plugins/openid-connect/keycloak-client-kong-settings.png">
<br>
<img src="/assets/images/products/plugins/openid-connect/keycloak-client-kong-auth.png">
<br>
</li>
  <li>
    <p>Create another confidential client <code class="language-plaintext highlighter-rouge">service</code> with <code class="language-plaintext highlighter-rouge">client_secret_basic</code> authentication.
For this client, Keycloak will auto-generate a secret similar to the following: <code class="language-plaintext highlighter-rouge">cf4c655a-0622-4ce6-a0de-d3353ef0b714</code>.
Enable the client credentials grant for the client:
<br><br>
<img src="/assets/images/products/plugins/openid-connect/keycloak-client-service-settings.png">
<br>
<img src="/assets/images/products/plugins/openid-connect/keycloak-client-service-auth.png">
<br></p>
  </li>
  <li>
    <p>(Optional) Create another confidential client <code class="language-plaintext highlighter-rouge">cert-bound</code> with settings similar to the <code class="language-plaintext highlighter-rouge">service</code> client created previously.
From the <strong>Advanced</strong> tab, enable the <strong>OAuth 2.0 Mutual TLS Certificate Bound Access Tokens Enabled</strong> toggle.</p>
  </li>
  <li>
    <p>(Optional, to test mTLS Client Authentication) Create another confidential client <code class="language-plaintext highlighter-rouge">client-tls-auth</code> with settings similar to the <code class="language-plaintext highlighter-rouge">service</code> client created above. 
From the <strong>Credentials</strong> tab, select the <strong>X509 Certificate</strong> Client Authenticator and fill the Subject DN field so that it matches the Kong client certificate’s, e.g.: <code class="language-plaintext highlighter-rouge">CN=JohnDoe, OU=IT</code>.</p>
  </li>
  <li>
    <p>(Optional, to test Demonstrating Proof-of-Possession Client Authentication) Create another confidential client <code class="language-plaintext highlighter-rouge">client-dpop-auth</code> with settings similar to the <code class="language-plaintext highlighter-rouge">service</code> client created above. 
From the <strong>Advanced</strong> tab, enable the<strong>OAuth 2.0 DPoP Bound Access Tokens Enabled</strong> toggle.</p>
  </li>
  <li>Create a verified user with the name: <code class="language-plaintext highlighter-rouge">john</code> and the non-temporary password: <code class="language-plaintext highlighter-rouge">doe</code> that can be used with the password grant:
<br><br>
<img src="/assets/images/products/plugins/openid-connect/keycloak-user-john.png">
</li>
</ol>

<p>Alternatively you can <a href="/assets/images/products/plugins/openid-connect/keycloak.json">download the exported Keycloak configuration</a>,
and use it to configure the Keycloak. Please refer to <a href="https://www.keycloak.org/docs/latest/server_admin/#_export_import" target="_blank" rel="noopener nofollow noreferrer ">Keycloak import documentation</a>
for more information.</p>

<p>You need to modify Keycloak <code class="language-plaintext highlighter-rouge">standalone.xml</code> configuration file, and change the socket binding from:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;socket-binding</span> <span class="na">name=</span><span class="s">"https"</span> <span class="na">port=</span><span class="s">"${jboss.https.port:8443}"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>to</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;socket-binding</span> <span class="na">name=</span><span class="s">"https"</span> <span class="na">port=</span><span class="s">"${jboss.https.port:8440}"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>The Keycloak default <code class="language-plaintext highlighter-rouge">https</code> port conflicts with the default Kong TLS proxy port,
and that can be a problem if both are started on the same host.</p>

<blockquote class="note">
  <p><strong>Note:</strong> The mTLS Client Authentication, along with the proof of possession feature that validates OAuth 2.0 Mutual TLS Certificate Bound Access Tokens, both require configuring Keycloak to validate client certificates with mTLS using the <code class="language-plaintext highlighter-rouge">--https-client-auth=request</code> option, and to configure TLS appropriately, including adding the trusted client certificates to the truststore. For more information, refer to the <a href="https://www.keycloak.org/server/enabletls" target="_blank" rel="noopener nofollow noreferrer ">Keycloak documentation</a>.</p>
</blockquote>



</details>

<details><summary>Configure Kong Gateway </summary>

<ol>
  <li>
    <p>Create a service:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> curl <span class="nt">-i</span> <span class="nt">-X</span> POST http://localhost:8001/services <span class="se">\</span>
   <span class="nt">--data</span> <span class="s2">"name=openid-connect"</span> <span class="se">\</span>
   <span class="nt">--data</span> <span class="s2">"url=http://httpbin.org/anything"</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a route:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> curl <span class="nt">-i</span> <span class="nt">-X</span> POST http://localhost:8001/services/openid-connect/routes <span class="se">\</span>
   <span class="nt">--data</span> <span class="s2">"name=openid-connect"</span> <span class="se">\</span>
   <span class="nt">--data</span> <span class="s2">"paths[]=/"</span>
</code></pre></div>    </div>
  </li>
</ol>



</details>

<h3 id="set-up-mtls-for-the-oidc-plugin">Set up mTLS for the OIDC plugin</h3>

<p>Using the Keycloak and Kong Gateway configuration from the <a href="#prerequisites">prerequisites</a>, 
set up an instance of the OpenID Connect plugin.</p>

<p>For the demo, we’re going to set up the following:</p>

<ul>
  <li>Issuer, client ID: Settings that connect the plugin to your IdP (in this case, the sample Keycloak app).</li>
  <li>
<code class="language-plaintext highlighter-rouge">client_auth</code>: Must use TLS (<code class="language-plaintext highlighter-rouge">tls_client_auth</code>).</li>
  <li>Auth methods: For demo purposes, we use the password grant, but you can use any supported auth method.</li>
  <li>
<code class="language-plaintext highlighter-rouge">tls_client_auth_cert_id</code>: Pass the ID of the certificate object <a href="#certificates">you created via <code class="language-plaintext highlighter-rouge">/certificates</code></a>.</li>
</ul>

<p>With all of the above in mind, let’s test out mTLS client auth with the password grant, using Keycloak as the IdP. 
Enable the OpenID Connect plugin on the <code class="language-plaintext highlighter-rouge">openid-connect</code> service:</p>

<!-- vale off -->

<div class="navtabs parent ">
  <div class="navtab-titles" role="tablist">
  
    
    <div data-slug="enable-on-a-service" data-navtab-id="navtab-41dea933-8ec5-4819-8c74-eb09d85a17f4-0" class="navtab-title" role="tab" aria-controls="navtab-id-0" tabindex="0">
      Enable on a service
    </div>
  
  </div>
  <div class="navtab-contents">
  
    
    <div data-panel="enable-on-a-service" data-navtab-content="navtab-41dea933-8ec5-4819-8c74-eb09d85a17f4-0" class="navtab-content" role="tabpanel" id="navtab-id-0" tabindex="0" aria-labelledby="navtab-id-0">
      
<div class="navtabs  ">
  <div class="navtab-titles" role="tablist">
  
    
    <div data-slug="kong-admin-api" data-navtab-id="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-0" class="navtab-title" role="tab" aria-controls="navtab-id-0" tabindex="0">
      Kong Admin API
    </div>
  
    
    <div data-slug="konnect-api" data-navtab-id="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-1" class="navtab-title" role="tab" aria-controls="navtab-id-1" tabindex="0">
      Konnect API
    </div>
  
    
    <div data-slug="kubernetes" data-navtab-id="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-2" class="navtab-title" role="tab" aria-controls="navtab-id-2" tabindex="0">
      Kubernetes
    </div>
  
    
    <div data-slug="declarative-yaml" data-navtab-id="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-3" class="navtab-title" role="tab" aria-controls="navtab-id-3" tabindex="0">
      Declarative (YAML)
    </div>
  
    
    <div data-slug="konnect-terraform" data-navtab-id="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-4" class="navtab-title" role="tab" aria-controls="navtab-id-4" tabindex="0">
      Konnect Terraform
    </div>
  
  </div>
  <div class="navtab-contents">
  
    
    <div data-panel="kong-admin-api" data-navtab-content="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-0" class="navtab-content" role="tabpanel" id="navtab-id-0" tabindex="0" aria-labelledby="navtab-id-0">
      
<p>Make the following request:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST http://localhost:8001/services/<span class="o">{</span>serviceName|Id<span class="o">}</span>/plugins <span class="se">\</span>
    <span class="nt">--header</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'
    {
  "name": "openid-connect",
  "config": {
    "issuer": "http://keycloak.test:8080/auth/realms/master",
    "client_id": "client-tls-auth",
    "client_auth": "tls_client_auth",
    "auth_methods": [
      "password"
    ],
    "tls_client_auth_cert_id": "1e0721c1-fd43-494c-9864-007bbba98c8c"
  }
}
    '</span>
</code></pre></div></div>

<p>Replace <code class="language-plaintext highlighter-rouge">SERVICE_NAME|ID</code> with the <code class="language-plaintext highlighter-rouge">id</code> or <code class="language-plaintext highlighter-rouge">name</code> of the service that this plugin configuration will target.</p>


    </div>
  
    
    <div data-panel="konnect-api" data-navtab-content="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-1" class="navtab-content" role="tabpanel" id="navtab-id-1" tabindex="0" aria-labelledby="navtab-id-1">
      
<p>Make the following request, substituting your own access token, region, control plane ID, and service ID:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST <span class="se">\</span>
https://<span class="o">{</span>us|eu<span class="o">}</span>.api.konghq.com/v2/control-planes/<span class="o">{</span>controlPlaneId<span class="o">}</span>/core-entities/services/<span class="o">{</span>serviceId<span class="o">}</span>/plugins <span class="se">\</span>
    <span class="nt">--header</span> <span class="s2">"accept: application/json"</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">--header</span> <span class="s2">"Authorization: Bearer TOKEN"</span> <span class="se">\</span>
    <span class="nt">--data</span> <span class="s1">'{"name":"openid-connect","config":{"issuer":"http://keycloak.test:8080/auth/realms/master","client_id":"client-tls-auth","client_auth":"tls_client_auth","auth_methods":["password"],"tls_client_auth_cert_id":"1e0721c1-fd43-494c-9864-007bbba98c8c"}}'</span>
</code></pre></div></div>

<p>See the <a href="/konnect/api/">Konnect API reference</a> to learn about region-specific URLs and personal access tokens.</p>


    </div>
  
    
    <div data-panel="kubernetes" data-navtab-content="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-2" class="navtab-content" role="tabpanel" id="navtab-id-2" tabindex="0" aria-labelledby="navtab-id-2">
      
<p>First, create a <a href="/kubernetes-ingress-controller/latest/references/custom-resources/#kongplugin">KongPlugin</a>
resource:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">echo "</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">configuration.konghq.com/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">KongPlugin</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">openid-connect-example</span>
<span class="na">plugin</span><span class="pi">:</span> <span class="s">openid-connect</span>
<span class="na">config</span><span class="pi">:</span>
  <span class="na">issuer</span><span class="pi">:</span> <span class="s">http://keycloak.test:8080/auth/realms/master</span>
  <span class="na">client_id</span><span class="pi">:</span> <span class="s">client-tls-auth</span>
  <span class="na">client_auth</span><span class="pi">:</span> <span class="s">tls_client_auth</span>
  <span class="na">auth_methods</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">password</span>
  <span class="na">tls_client_auth_cert_id</span><span class="pi">:</span> <span class="s">1e0721c1-fd43-494c-9864-007bbba98c8c</span>
<span class="s2">"</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">kubectl</span><span class="nv"> </span><span class="s">apply</span><span class="nv"> </span><span class="s">-f</span><span class="nv"> </span><span class="s">-</span>
</code></pre></div></div>

<p>Next, apply the <code class="language-plaintext highlighter-rouge">KongPlugin</code> resource to an ingress by annotating the <code class="language-plaintext highlighter-rouge">service</code> as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">kubectl annotate service SERVICE_NAME konghq.com/plugins=openid-connect-example</span>
</code></pre></div></div>

<p>Replace <code class="language-plaintext highlighter-rouge">SERVICE_NAME</code> with the name of the service that this plugin configuration will target.
You can see your available ingresses by running <code class="language-plaintext highlighter-rouge">kubectl get service</code>.</p>

<blockquote class="note">
  <strong>Note:</strong> The KongPlugin resource only needs to be defined once
  and can be applied to any service, consumer, or route in the namespace. If you
  want the plugin to be available cluster-wide, create the resource as a
  <code>KongClusterPlugin</code> instead of <code>KongPlugin</code>.
</blockquote>


    </div>
  
    
    <div data-panel="declarative-yaml" data-navtab-content="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-3" class="navtab-content" role="tabpanel" id="navtab-id-3" tabindex="0" aria-labelledby="navtab-id-3">
      
<p>Add this section to your declarative configuration file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">plugins</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">openid-connect</span>
  <span class="na">service</span><span class="pi">:</span> <span class="s">SERVICE_NAME|ID</span>
  <span class="na">config</span><span class="pi">:</span>
    <span class="na">issuer</span><span class="pi">:</span> <span class="s">http://keycloak.test:8080/auth/realms/master</span>
    <span class="na">client_id</span><span class="pi">:</span> <span class="s">client-tls-auth</span>
    <span class="na">client_auth</span><span class="pi">:</span> <span class="s">tls_client_auth</span>
    <span class="na">auth_methods</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">password</span>
    <span class="na">tls_client_auth_cert_id</span><span class="pi">:</span> <span class="s">1e0721c1-fd43-494c-9864-007bbba98c8c</span>
</code></pre></div></div>

<p>Replace <code class="language-plaintext highlighter-rouge">SERVICE_NAME|ID</code> with the <code class="language-plaintext highlighter-rouge">id</code> or <code class="language-plaintext highlighter-rouge">name</code> of the service that this plugin configuration will target.</p>


    </div>
  
    
    <div data-panel="konnect-terraform" data-navtab-content="navtab-baf914b5-d991-4e1b-9665-468d38cb9d05-4" class="navtab-content" role="tabpanel" id="navtab-id-4" tabindex="0" aria-labelledby="navtab-id-4">
      
<details>
  <summary><strong>Prerequisite:</strong> Configure your Personal Access Token</summary>

  <div class="language-hcl highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nx">terraform</span> <span class="p">{</span>
  <span class="nx">required_providers</span> <span class="p">{</span>
    <span class="nx">konnect</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">source</span>  <span class="o">=</span> <span class="s2">"kong/konnect"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">provider</span> <span class="s2">"konnect"</span> <span class="p">{</span>
  <span class="nx">personal_access_token</span> <span class="o">=</span> <span class="s2">"kpat_YOUR_TOKEN"</span>
  <span class="nx">server_url</span>            <span class="o">=</span> <span class="s2">"https://us.api.konghq.com/"</span>
<span class="p">}</span>
</code></pre></div>  </div>
</details>

<p>Add the following to your Terraform configuration to create a Konnect Gateway Plugin:</p>

<div class="language-hcl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">resource</span> <span class="s2">"konnect_gateway_plugin_openid_connect"</span> <span class="s2">"my_openid_connect"</span> <span class="p">{</span>
  <span class="nx">enabled</span> <span class="o">=</span> <span class="kc">true</span>

  <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">issuer</span> <span class="o">=</span> <span class="s2">"http://keycloak.test:8080/auth/realms/master"</span>
    <span class="nx">client_id</span> <span class="o">=</span> <span class="s2">"client-tls-auth"</span>
    <span class="nx">client_auth</span> <span class="o">=</span> <span class="s2">"tls_client_auth"</span>
    <span class="nx">auth_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"password"</span><span class="p">]</span>
    <span class="nx">tls_client_auth_cert_id</span> <span class="o">=</span> <span class="s2">"1e0721c1-fd43-494c-9864-007bbba98c8c"</span>
  <span class="p">}</span>

  <span class="nx">control_plane_id</span> <span class="o">=</span> <span class="nx">konnect_gateway_control_plane</span><span class="p">.</span><span class="nx">my_konnect_cp</span><span class="p">.</span><span class="nx">id</span>
  <span class="nx">service</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">id</span> <span class="o">=</span> <span class="nx">konnect_gateway_service</span><span class="p">.</span><span class="nx">my_service</span><span class="p">.</span><span class="nx">id</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>


    </div>
  
  </div>
</div>


    </div>
  
  </div>
</div>

<!-- vale on -->

<h3 id="test-mtls-client-auth">Test mTLS client auth</h3>

<p>Access the service using the <code class="language-plaintext highlighter-rouge">password</code> auth method.
Kong will access the IdP’s token endpoint using the mTLS Client Authentication with the configured certificate:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost:8000/openid-connect <span class="nt">--user</span> john:doe
</code></pre></div></div>

<p>If successful, you should receive a 200 status code:</p>
<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
</code></pre></div></div>

    
          
  <div class="book-nav-container">
    <hr>
    
      <div class="book-nav previous">
        <span class="direction">Previous</span>
        <a href="/hub/kong-inc/openid-connect/how-to/authorization/consumer/">Consumer authorization</a>
      </div>
    
    
      <div class="book-nav next">
        <span class="direction">Next</span>
        <a href="/hub/kong-inc/openid-connect/how-to/third-party/auth0/">OpenID Connect with Auth0</a>
      </div>
    
  </div>


        </div>
      </div>
    </div>
  </div>
  <div id="scroll-to-top-button">
    <i class="fas fa-chevron-up"></i>
  </div>
  
    <div class="feedback-widget-container">
  <input id="feedback-widget-checkbox" type="checkbox">
  <label for="feedback-widget-checkbox">
    <img src="/assets/images/icons/feedback-widget.svg" alt="Feedback widget">
  </label>
  <div class="feedback-container">
    <div class="feedback-thankyou">
      Thank you for your feedback.
    </div>
    <div class="feedback-comment">
      <textarea id="feedback-comment-text" rows="3" placeholder="Please let us know what we can improve on this page..."></textarea>
      <div class="feedback-comment-buttons">
        <button id="feedback-comment-button-back">Back</button>
        <button id="feedback-comment-button-submit" class="button-primary">Submit</button>
      </div>
    </div>
    <div class="feedback-options">
      <div class="feedback-options-title">Was this page useful?</div>
      <div class="feedback-options-buttons">
        <i data-feedback-result="yes" class="feedback-options-button far fa-thumbs-up"></i>
        <i data-feedback-result="no" class="feedback-options-button far fa-thumbs-down"></i>
      </div>
    </div>
  </div>
</div>

  
</div>

<div id="image-modal" data-image-expand-disabled="">
  <div class="image-modal-backdrop"></div>
  <div class="image-container">
    <img src="" alt="">
    <i class="fa fa-times"></i>
  </div>
</div>


<!-- <script>
/* eslint-disable */
  window.intercomSettings = {
    app_id: "gwoi3d8y"
  };
</script>

<script>
/* eslint-disable */
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/gwoi3d8y';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
</script>
 -->


    <footer class="marketing-footer--light-gray">
  <section>
    <ul class="newsletter">
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/logos/konglogo-light-theme-primary.svg" alt="Kong">
        </div>
        <div class="footer-title">Powering the API world</div>
        <p>
          Increase developer productivity, security, and performance at scale with the unified platform for API management, service mesh, and ingress controller.
        </p>
        <div class="footer-form-container">
          <form id="subscribe-form" method="POST" action="/assets/javascripts/subscribe.js">
            <input required id="subscribe-input" type="email" name="email" placeholder="Email" aria-required="true" aria-invalid="false">
            <input id="footer-form-button" type="submit" form="subscribe-form" value="Subscribe">
          </form>

          <div id="form-response"></div>
        </div>
      </li>

      <li class="footer-columns">
        <ul class="footer-columns-product-list">
          <li>
            <nav>
              <div class="footer-category">Products</div>
              <ul>
                <li>
                  <a href="https://konghq.com/products/kong-konnect" target="_blank" rel="noopener nofollow noreferrer ">Kong Konnect</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-enterprise" target="_blank" rel="noopener nofollow noreferrer ">Kong Gateway Enterprise</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-gateway" target="_blank" rel="noopener nofollow noreferrer ">Kong Gateway</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-mesh" target="_blank" rel="noopener nofollow noreferrer ">Kong Mesh</a>
                </li>
                <li>
                  <a href="https://konghq.com/products/kong-ingress-controller" target="_blank" rel="noopener nofollow noreferrer ">Kong Ingress Controller</a>
                </li>
                <li>
                  <a href="https://insomnia.rest/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Kong Insomnia</a>
                </li>
                <li>
                  <a href="https://konghq.com/product-updates" target="_blank" rel="noopener nofollow noreferrer ">Product Updates</a>
                </li>
                <li>
                  <a href="https://konghq.com/contact-sales" target="_blank" rel="noopener nofollow noreferrer ">Get Started</a>
                </li>
              </ul>
            </nav>
          </li>
          <li>
            <nav>
              <div class="footer-category">Documentation</div>
              <ul>
                <li>
                  <a href="/konnect/">Kong Konnect Docs</a>
                </li>
                <li>
                  <a href="/gateway/latest/">Kong Gateway Docs</a>
                </li>
                <li>
                  <a href="/gateway/latest/kong-enterprise/">Kong Gateway Enterprise Docs</a>
                </li>
                <li>
                  <a href="/mesh/latest/">Kong Mesh Docs</a>
                </li>
                <li>
                  <a href="https://docs.insomnia.rest/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Kong Insomnia Docs</a>
                </li>
                <li>
                  <a href="/hub/">Kong Konnect Plugin Hub</a>
                </li>
              </ul>
            </nav>
          </li>
          <li>
            <nav>
              <div class="footer-category">Open Source</div>
              <ul>
                <li>
                  <a href="https://konghq.com/install/#kong-community" target="_blank" rel="noopener nofollow noreferrer ">Kong Gateway</a>
                </li>
                <li>
                  <a href="https://kuma.io/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Kuma</a>
                </li>
                <li>
                  <a href="https://insomnia.rest/" target="_blank" rel="noopener nofollow noreferrer noopener nofollow noreferrer">Insomnia</a>
                </li>
                <li>
                  <a href="https://konghq.com/community" target="_blank" rel="noopener nofollow noreferrer ">Kong Community</a>
                </li>
              </ul>
            </nav>
          </li>
          <li>
            <nav>
              <div class="footer-category">Company</div>
              <ul>
                <li>
                  <a href="https://konghq.com/company/about-us" target="_blank" rel="noopener nofollow noreferrer ">About Kong</a>
                </li>
                <li>
                  <a href="https://konghq.com/customers" target="_blank" rel="noopener nofollow noreferrer ">Customers</a>
                </li>
                <li>
                  <a href="https://konghq.com/company/careers" target="_blank" rel="noopener nofollow noreferrer ">Careers</a>
                </li>
                <li>
                  <a href="https://konghq.com/press-room" target="_blank" rel="noopener nofollow noreferrer ">Press</a>
                </li>
                <li>
                  <a href="https://konghq.com/events" target="_blank" rel="noopener nofollow noreferrer ">Events</a>
                </li>
                <li>
                  <a href="https://konghq.com/company/contact-us" target="_blank" rel="noopener nofollow noreferrer ">Contact</a>
                </li>
              </ul>
            </nav>
          </li>
        </ul>
      </li>

    </ul>
  </section>

  <section class="legal">
    <div class="container d-flex">
      <div class="social">
        <div class="social-link">
          <a href="https://www.facebook.com/konghq/" title="Facebook" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="Facebook" class="fa fa-facebook-official" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://twitter.com/thekonginc" title="Twitter" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="Twitter" class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://www.meetup.com/topics/kong/all/" title="Meetup" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="Meetup" class="fa fa-meetup" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://linkedin.com/company/278819" title="LinkedIn" target="_blank" rel="noopener nofollow noreferrer "><i aria-label="GitHub" class="fa fa-linkedin" aria-hidden="true"></i></a>
        </div>
        <div class="social-link">
          <a href="https://github.com/kong/kong" target="_blank" class="btn-gh" title="GitHub" rel="noopener nofollow noreferrer ">
            <i class="fa fa-github" aria-hidden="true" aria-label="GitHub"></i>
          </a>
        </div>
      </div>
      <ul>
        <li>
          <span class="mashape-footer-content">
            <a href="https://konghq.com/legal/terms-of-use" target="_blank" rel="noopener nofollow noreferrer ">Terms</a><b>•</b>
            <a href="https://konghq.com/legal/privacy-policy" target="_blank" rel="noopener nofollow noreferrer ">Privacy</a><b>•</b>
            <a href="https://konghq.com/compliance" target="_blank" rel="noopener nofollow noreferrer ">Trust and Compliance</a>
          </span>
        </li>
      </ul>
      <div>
        <span>© Kong Inc. 2024  </span>
      </div>
    </div>
  </section>
</footer>
 <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    anchor.title = `${id} Permalink`;
    return anchor;
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var className =
        ".show-anchor-links h1, .show-anchor-links h2, .show-anchor-links h3, " +
        ".show-anchor-links h4, .show-anchor-links h5, .show-anchor-links h6";
      var headers = document.querySelectorAll(className);

      for (var i = 0; i < headers.length; i++) {
        var header = headers[i];
        if (typeof header.id !== "undefined" && header.id !== "") {
          header.prepend(anchorForId(header.id));
        }
      }
    }
  };
</script>


    
      <script>
        (function stp(){
          if (typeof analytics == "undefined"){
            return setTimeout(stp, 30);
          }
          analytics.page();
        })();
      </script>
    

    <div id="fb-root"></div>
    <script id="github-bjs" src="https://buttons.github.io/buttons.js" async defer></script>

    <script type="text/javascript">
      var _vwo_code = (function() {
        var account_id = 125292,
          settings_tolerance = 2000,
          library_tolerance = 2500,
          use_existing_jquery = true,
          // DO NOT EDIT BELOW THIS LINE
          f = false,
          d = document;
        return {
          use_existing_jquery: function() {
            return use_existing_jquery;
          },
          library_tolerance: function() {
            return library_tolerance;
          },
          finish: function() {
            if (!f) {
              f = true;
              var a = d.getElementById('_vis_opt_path_hides');
              if (a) a.parentNode.removeChild(a);
            }
          },
          finished: function() {
            return f;
          },
          load: function(a) {
            var b = d.createElement('script');
            b.src = a;
            b.type = 'text/javascript';
            b.innerText;
            b.onerror = function() {
              _vwo_code.finish();
            };
            d.getElementsByTagName('head')[0].appendChild(b);
          },
          init: function() {
            settings_timer = setTimeout(
              '_vwo_code.finish()',
              settings_tolerance
            );
            this.load(
              '//dev.visualwebsiteoptimizer.com/j.php?a=' +
                account_id +
                '&u=' +
                encodeURIComponent(d.URL) +
                '&r=' +
                Math.random()
            );
            var a = d.createElement('style'),
              b = '',
              h = d.getElementsByTagName('head')[0];
            a.setAttribute('id', '_vis_opt_path_hides');
            a.setAttribute('type', 'text/css');
            if (a.styleSheet) a.styleSheet.cssText = b;
            else a.appendChild(d.createTextNode(b));
            h.appendChild(a);
            return settings_timer;
          }
        };
      })();
      _vwo_settings_timer = _vwo_code.init();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>

    
      <script type="text/javascript">
        docsearch({
          appId: '05Y6TLHNFZ',
          apiKey: '80483bfe28d9fd036a11a6f6a06454f8',
          indexName: 'konghq',
          container: '#getkong-algolia-search-input',
          disableUserPersonalization: true,
          placeholder: 'Search the docs...',
          // Override selected event to allow for local environment navigation
          transformItems(items) {
            return items.map((item) => {
              var modifiedUrl = window.location.protocol + '//' + window.location.host + item.url.split('docs.konghq.com')[1];
              return { ...item, url: modifiedUrl };
            });
          },
          translations: {
            button: {
              buttonText: 'Search the docs..',
              buttonAriaLabel: 'Search the docs...'
            }
          },
          resultsFooterComponent({ state }) {
            var facetParameters = {};
            
              facetParameters = {"version[0]":"latest","product[0]":"Plugin Hub"};
            

            var queryParams = new URLSearchParams(facetParameters);
            queryParams.set('query', state.query);

            return {
              // The HTML `tag`
              type: 'a',
              ref: undefined,
              constructor: undefined,
              key: state.query,
              // Its props
              props: {
                href: `/search/?${queryParams.toString()}`,
                target: '_blank',
                // Raw text rendered in the HTML element
                children: 'See more >'
              },
              __v: null,
            };
          },
          
           searchParameters: {
              optionalFilters: ['product:Kong Konnect<score=1>', 'product:Kong Gateway<score=2>', 'product:Plugin Hub<score=3>'],
              facetFilters: [ 'version:latest']
            }
            
          });
      </script>
    
  </body>

  

</html>
